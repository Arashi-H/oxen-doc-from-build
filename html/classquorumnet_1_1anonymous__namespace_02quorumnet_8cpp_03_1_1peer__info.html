<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Monero: quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Monero
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacequorumnet.html">quorumnet</a></li><li class="navelem"><a class="el" href="namespacequorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03.html">anonymous_namespace{quorumnet.cpp}</a></li><li class="navelem"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html">peer_info</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a1366ba3b74deb51f343e9cb599f91b33"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a1366ba3b74deb51f343e9cb599f91b33">exclude_set</a> = std::unordered_set&lt; <a class="el" href="structcrypto_1_1public__key.html">crypto::public_key</a> &gt;</td></tr>
<tr class="separator:a1366ba3b74deb51f343e9cb599f91b33"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac0e291d7015424e603a538c1223bdb35"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#ac0e291d7015424e603a538c1223bdb35">peer_info</a> (<a class="el" href="structquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1QnetState.html">QnetState</a> &amp;qnet, <a class="el" href="namespaceservice__nodes.html#a720216004c8195ad817756b4312abd52">quorum_type</a> q_type, const <a class="el" href="structservice__nodes_1_1quorum.html">quorum</a> *<a class="el" href="structservice__nodes_1_1quorum.html">quorum</a>, <a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a> opportunistic=<a class="el" href="stdbool_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>, <a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a1366ba3b74deb51f343e9cb599f91b33">exclude_set</a> exclude={}, <a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a> include_workers=<a class="el" href="stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="memdesc:ac0e291d7015424e603a538c1223bdb35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Singleton wrapper around <a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html">peer_info</a>.  <a href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#ac0e291d7015424e603a538c1223bdb35">More...</a><br /></td></tr>
<tr class="separator:ac0e291d7015424e603a538c1223bdb35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01db8ab8747180ab73472942b04cf6d5"><td class="memTemplParams" colspan="2">template&lt;typename QuorumIt &gt; </td></tr>
<tr class="memitem:a01db8ab8747180ab73472942b04cf6d5"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a01db8ab8747180ab73472942b04cf6d5">peer_info</a> (<a class="el" href="structquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1QnetState.html">QnetState</a> &amp;qnet, <a class="el" href="namespaceservice__nodes.html#a720216004c8195ad817756b4312abd52">quorum_type</a> q_type, QuorumIt qbegin, QuorumIt qend, <a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a> opportunistic=<a class="el" href="stdbool_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>, std::unordered_set&lt; <a class="el" href="structcrypto_1_1public__key.html">crypto::public_key</a> &gt; exclude={}, <a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a> include_workers=<a class="el" href="stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="separator:a01db8ab8747180ab73472942b04cf6d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53f31999823de91a1bbc25415bf93a2c"><td class="memTemplParams" colspan="2">template&lt;typename... T&gt; </td></tr>
<tr class="memitem:a53f31999823de91a1bbc25415bf93a2c"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a53f31999823de91a1bbc25415bf93a2c">relay_to_peers</a> (const std::string_view &amp;cmd, const <a class="el" href="groestl__tables_8h.html#a0735f92342601a6dcd26111ace40500a">T</a> &amp;...data)</td></tr>
<tr class="memdesc:a53f31999823de91a1bbc25415bf93a2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Relays a command and any number of serialized data to everyone we're supposed to relay to.  <a href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a53f31999823de91a1bbc25415bf93a2c">More...</a><br /></td></tr>
<tr class="separator:a53f31999823de91a1bbc25415bf93a2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a113fda5674ea21cdca3401ca9f36ff78"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="structcrypto_1_1public__key.html">crypto::public_key</a>, std::pair&lt; <a class="el" href="structcrypto_1_1x25519__public__key.html">crypto::x25519_public_key</a>, std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a113fda5674ea21cdca3401ca9f36ff78">remotes</a></td></tr>
<tr class="memdesc:a113fda5674ea21cdca3401ca9f36ff78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps pubkeys to x25519 pubkeys and zmq connection strings.  <a href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a113fda5674ea21cdca3401ca9f36ff78">More...</a><br /></td></tr>
<tr class="separator:a113fda5674ea21cdca3401ca9f36ff78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f41cba52ce3a11aa94f7e17e7963ea2"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::string, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a4f41cba52ce3a11aa94f7e17e7963ea2">peers</a></td></tr>
<tr class="separator:a4f41cba52ce3a11aa94f7e17e7963ea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a758dbbdb950e28b70ade749248267041"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a758dbbdb950e28b70ade749248267041">strong_peers</a></td></tr>
<tr class="separator:a758dbbdb950e28b70ade749248267041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5071ca0069f4f2bdf918162d2baf34df"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a5071ca0069f4f2bdf918162d2baf34df">my_position</a></td></tr>
<tr class="memdesc:a5071ca0069f4f2bdf918162d2baf34df"><td class="mdescLeft">&#160;</td><td class="mdescRight">The caller's positions in the given quorum(s), -1 if not found.  <a href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a5071ca0069f4f2bdf918162d2baf34df">More...</a><br /></td></tr>
<tr class="separator:a5071ca0069f4f2bdf918162d2baf34df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb52355348f1466017ed9849d0d952e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#acdb52355348f1466017ed9849d0d952e">my_position_count</a></td></tr>
<tr class="separator:acdb52355348f1466017ed9849d0d952e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a74fdb42a51b6df242d122ae7573f8938"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a74fdb42a51b6df242d122ae7573f8938">add_peer</a> (const <a class="el" href="structcrypto_1_1public__key.html">crypto::public_key</a> &amp;pubkey, <a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a> strong=<a class="el" href="stdbool_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>)</td></tr>
<tr class="separator:a74fdb42a51b6df242d122ae7573f8938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fc6c5c7ab729a2f411a2adceafc466a"><td class="memTemplParams" colspan="2">template&lt;typename QuorumIt &gt; </td></tr>
<tr class="memitem:a1fc6c5c7ab729a2f411a2adceafc466a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a1fc6c5c7ab729a2f411a2adceafc466a">compute_validator_peers</a> (QuorumIt qbegin, QuorumIt qend, <a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a> opportunistic)</td></tr>
<tr class="separator:a1fc6c5c7ab729a2f411a2adceafc466a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f9054214060bc052335c556a9de9db0"><td class="memTemplParams" colspan="2">template&lt;size_t N, size_t... I&gt; </td></tr>
<tr class="memitem:a8f9054214060bc052335c556a9de9db0"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a8f9054214060bc052335c556a9de9db0">relay_to_peers_impl</a> (const std::string_view &amp;cmd, std::array&lt; std::string, N &gt; relay_data, std::index_sequence&lt; I... &gt;)</td></tr>
<tr class="memdesc:a8f9054214060bc052335c556a9de9db0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Relays a command and pre-serialized data to everyone we're supposed to relay to.  <a href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a8f9054214060bc052335c556a9de9db0">More...</a><br /></td></tr>
<tr class="separator:a8f9054214060bc052335c556a9de9db0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2f474f3a270cd5c392f1b8670a8768a6"><td class="memItemLeft" align="right" valign="top">oxenmq::OxenMQ &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a2f474f3a270cd5c392f1b8670a8768a6">omq</a></td></tr>
<tr class="separator:a2f474f3a270cd5c392f1b8670a8768a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Helper class to calculate and relay to peers of quorums.</p>
<p>TODO: add a wrapper that caches this so that looking up the same quorum peers within a certain amount of time doesn't need to recalculate. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a1366ba3b74deb51f343e9cb599f91b33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1366ba3b74deb51f343e9cb599f91b33">&#9670;&nbsp;</a></span>exclude_set</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using quorumnet::anonymous_namespace{quorumnet.cpp}::<a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a1366ba3b74deb51f343e9cb599f91b33">peer_info::exclude_set</a> =  std::unordered_set&lt;<a class="el" href="structcrypto_1_1public__key.html">crypto::public_key</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac0e291d7015424e603a538c1223bdb35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0e291d7015424e603a538c1223bdb35">&#9670;&nbsp;</a></span>peer_info() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::peer_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1QnetState.html">QnetState</a> &amp;&#160;</td>
          <td class="paramname"><em>qnet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceservice__nodes.html#a720216004c8195ad817756b4312abd52">quorum_type</a>&#160;</td>
          <td class="paramname"><em>q_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structservice__nodes_1_1quorum.html">quorum</a> *&#160;</td>
          <td class="paramname"><em>quorum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>&#160;</td>
          <td class="paramname"><em>opportunistic</em> = <code><a class="el" href="stdbool_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html#a1366ba3b74deb51f343e9cb599f91b33">exclude_set</a>&#160;</td>
          <td class="paramname"><em>exclude</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>&#160;</td>
          <td class="paramname"><em>include_workers</em> = <code><a class="el" href="stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Singleton wrapper around <a class="el" href="classquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1peer__info.html">peer_info</a>. </p>

</div>
</div>
<a id="a01db8ab8747180ab73472942b04cf6d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01db8ab8747180ab73472942b04cf6d5">&#9670;&nbsp;</a></span>peer_info() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename QuorumIt &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::peer_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1QnetState.html">QnetState</a> &amp;&#160;</td>
          <td class="paramname"><em>qnet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceservice__nodes.html#a720216004c8195ad817756b4312abd52">quorum_type</a>&#160;</td>
          <td class="paramname"><em>q_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuorumIt&#160;</td>
          <td class="paramname"><em>qbegin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuorumIt&#160;</td>
          <td class="paramname"><em>qend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>&#160;</td>
          <td class="paramname"><em>opportunistic</em> = <code><a class="el" href="stdbool_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_set&lt; <a class="el" href="structcrypto_1_1public__key.html">crypto::public_key</a> &gt;&#160;</td>
          <td class="paramname"><em>exclude</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>&#160;</td>
          <td class="paramname"><em>include_workers</em> = <code><a class="el" href="stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructs peer information for the given quorums and quorum position of the caller. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">qnet</td><td>- the <a class="el" href="structquorumnet_1_1anonymous__namespace_02quorumnet_8cpp_03_1_1QnetState.html">QnetState</a> reference </td></tr>
    <tr><td class="paramname">q_type</td><td>- the type of quorum </td></tr>
    <tr><td class="paramname">qbegin,qend</td><td>- the iterators to a set of pointers (or other deferenceable type) to quorums </td></tr>
    <tr><td class="paramname">opportunistic</td><td>- if true then the peers to relay will also attempt to relay to any incoming peers <em>if</em> those peers are already connected when the message is relayed. </td></tr>
    <tr><td class="paramname">exclude</td><td>- can be specified as a set of peers that should be excluded from the peer list. Typically for peers that we already know have the relayed information. This SN's pubkey is always added to this exclude list. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a74fdb42a51b6df242d122ae7573f8938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74fdb42a51b6df242d122ae7573f8938">&#9670;&nbsp;</a></span>add_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a> quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::add_peer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcrypto_1_1public__key.html">crypto::public_key</a> &amp;&#160;</td>
          <td class="paramname"><em>pubkey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>&#160;</td>
          <td class="paramname"><em>strong</em> = <code><a class="el" href="stdbool_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Looks up a pubkey in known remotes and adds it to <code>peers</code>. If strong, it is added with an address, otherwise it is added with an empty address. If the element already exists, it will be updated <em>if</em> it the existing entry is weak and <code>strong</code> is true, otherwise it will be left as is. Returns true if a new entry was created or a weak entry was upgraded. </p>

</div>
</div>
<a id="a1fc6c5c7ab729a2f411a2adceafc466a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fc6c5c7ab729a2f411a2adceafc466a">&#9670;&nbsp;</a></span>compute_validator_peers()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename QuorumIt &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::compute_validator_peers </td>
          <td>(</td>
          <td class="paramtype">QuorumIt&#160;</td>
          <td class="paramname"><em>qbegin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuorumIt&#160;</td>
          <td class="paramname"><em>qend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>&#160;</td>
          <td class="paramname"><em>opportunistic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>strong</p>

</div>
</div>
<a id="a53f31999823de91a1bbc25415bf93a2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53f31999823de91a1bbc25415bf93a2c">&#9670;&nbsp;</a></span>relay_to_peers()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename... T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::relay_to_peers </td>
          <td>(</td>
          <td class="paramtype">const std::string_view &amp;&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="groestl__tables_8h.html#a0735f92342601a6dcd26111ace40500a">T</a> &amp;...&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Relays a command and any number of serialized data to everyone we're supposed to relay to. </p>

</div>
</div>
<a id="a8f9054214060bc052335c556a9de9db0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f9054214060bc052335c556a9de9db0">&#9670;&nbsp;</a></span>relay_to_peers_impl()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;size_t N, size_t... I&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::relay_to_peers_impl </td>
          <td>(</td>
          <td class="paramtype">const std::string_view &amp;&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::array&lt; std::string, N &gt;&#160;</td>
          <td class="paramname"><em>relay_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::index_sequence&lt; I... &gt;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Relays a command and pre-serialized data to everyone we're supposed to relay to. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5071ca0069f4f2bdf918162d2baf34df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5071ca0069f4f2bdf918162d2baf34df">&#9670;&nbsp;</a></span>my_position</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::my_position</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The caller's positions in the given quorum(s), -1 if not found. </p>

</div>
</div>
<a id="acdb52355348f1466017ed9849d0d952e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdb52355348f1466017ed9849d0d952e">&#9670;&nbsp;</a></span>my_position_count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::my_position_count</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of actual positions found in my_position (i.e. the number of elements of <code>my_position</code> not equal to -1). </p>

</div>
</div>
<a id="a2f474f3a270cd5c392f1b8670a8768a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f474f3a270cd5c392f1b8670a8768a6">&#9670;&nbsp;</a></span>omq</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">oxenmq::OxenMQ&amp; quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::omq</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4f41cba52ce3a11aa94f7e17e7963ea2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f41cba52ce3a11aa94f7e17e7963ea2">&#9670;&nbsp;</a></span>peers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;std::string , std::string &gt; quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::peers</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stores the x25519 string pubkeys to either zmq connection strings (for a "strong" connection) or empty strings (for an opportunistic "weak" connection). </p>

</div>
</div>
<a id="a113fda5674ea21cdca3401ca9f36ff78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a113fda5674ea21cdca3401ca9f36ff78">&#9670;&nbsp;</a></span>remotes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="structcrypto_1_1public__key.html">crypto::public_key</a>, std::pair&lt;<a class="el" href="structcrypto_1_1x25519__public__key.html">crypto::x25519_public_key</a>, std::string&gt; &gt; quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::remotes</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps pubkeys to x25519 pubkeys and zmq connection strings. </p>

</div>
</div>
<a id="a758dbbdb950e28b70ade749248267041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a758dbbdb950e28b70ade749248267041">&#9670;&nbsp;</a></span>strong_peers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int quorumnet::anonymous_namespace{quorumnet.cpp}::peer_info::strong_peers</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of strong peers, that is, the count of <code>peers</code> that has a non-empty second value. Will be the same as <code><a class="el" href="namespacelmdb_1_1stream.html#aba452209f8756851cd8e72e4cb42e2b9">peers.count()</a></code> if opportunistic connections are disabled. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/cryptonote_protocol/<a class="el" href="quorumnet_8cpp.html">quorumnet.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 21 2022 01:12:15 for Monero by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
