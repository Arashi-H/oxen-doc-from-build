<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Monero: src/cryptonote_core/oxen_name_system.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Monero
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c2124ce071ea3a7a634e4f0044274ddd.html">cryptonote_core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">oxen_name_system.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="oxen__name__system_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef OXEN_NAME_SYSTEM_H</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define OXEN_NAME_SYSTEM_H</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="crypto_2crypto_8h.html">crypto/crypto.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cryptonote__config_8h.html">cryptonote_config.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;epee/span.h&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="tx__extra_8h.html">cryptonote_basic/tx_extra.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fs_8h.html">common/fs.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;oxenc/hex.h&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">struct </span>sqlite3;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">struct </span>sqlite3_stmt;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacecryptonote.html">cryptonote</a></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;{</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">struct </span>checkpoint_t;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">struct </span><a class="code" href="namespacecryptonote.html#a7b6dd48b799974996fb5111859c34c55a14511f2f5564650d129ca7cabc333278">block</a>;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">struct </span>address_parse_info;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">class </span>transaction;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">struct </span>account_address;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">struct </span>tx_extra_oxen_name_system;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">class </span>Blockchain;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}; <span class="comment">// namespace cryptonote</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceons.html">ons</a></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="namespaceons.html#a6649a7975e76df11e78ae9bbe376f72f">   30</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#a6649a7975e76df11e78ae9bbe376f72f">WALLET_NAME_MAX</a>                  = 64;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="namespaceons.html#ae5c07ec3fec3791890c5ad122df34f7a">   31</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#ae5c07ec3fec3791890c5ad122df34f7a">WALLET_ACCOUNT_BINARY_LENGTH_INC_PAYMENT_ID</a>     = 73;  <span class="comment">// Wallet will encrypt an identifier (1 byte) a public spend and view key (2x 32 bytes) = 65 bytes plus an additional item for payment id (8 bytes) if necessary. The identifier 0 -&gt; No Subaddress or Payment ID, 1 -&gt; Has Subaddress, 2-&gt; Has Payment ID</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="namespaceons.html#a3784a0f57a121b1d44f574b7a4733979">   32</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#a3784a0f57a121b1d44f574b7a4733979">WALLET_ACCOUNT_BINARY_LENGTH_NO_PAYMENT_ID</a>     = 65;</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="namespaceons.html#aafd0012e57b4503dff6f816f178b7209">   33</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#aafd0012e57b4503dff6f816f178b7209">LOKINET_DOMAIN_NAME_MAX</a>          = 63 + 5; <span class="comment">// DNS components name must be at most 63 (+ 5 for .loki); this limit applies if there is at least one hyphen (and thus includes punycode)</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="namespaceons.html#a8c0748b2d42604589c5f2c119b6c843b">   34</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#a8c0748b2d42604589c5f2c119b6c843b">LOKINET_DOMAIN_NAME_MAX_NOHYPHEN</a> = 32 + 5; <span class="comment">// If the name does not contain a - then we restrict it to 32 characters so that it cannot be (and is obviously not) an encoded .loki address (52 characters)</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="namespaceons.html#a89949edeb94e4417b1e3c010d3c747a0">   35</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#a89949edeb94e4417b1e3c010d3c747a0">LOKINET_ADDRESS_BINARY_LENGTH</a>    = <span class="keyword">sizeof</span>(<a class="code" href="structcrypto_1_1ed25519__public__key.html">crypto::ed25519_public_key</a>);</div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="namespaceons.html#adc387613904f0957d2b7cff8e7dce630">   36</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#adc387613904f0957d2b7cff8e7dce630">SESSION_DISPLAY_NAME_MAX</a>         = 64;</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="namespaceons.html#a363f99466b65d166a904ddc05be8cb0c">   37</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#a363f99466b65d166a904ddc05be8cb0c">SESSION_PUBLIC_KEY_BINARY_LENGTH</a> = 1 + <span class="keyword">sizeof</span>(<a class="code" href="structcrypto_1_1ed25519__public__key.html">crypto::ed25519_public_key</a>); <span class="comment">// Session keys at prefixed with 0x05 + ed25519 key</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="namespaceons.html#a9530e6bb7b824044a03e87dde0bc99aa">   39</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#a9530e6bb7b824044a03e87dde0bc99aa">NAME_HASH_SIZE</a> = <span class="keyword">sizeof</span>(<a class="code" href="structcrypto_1_1hash.html">crypto::hash</a>);</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="namespaceons.html#aebf8e36fd26113b0ba62494590b75f98">   40</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#aebf8e36fd26113b0ba62494590b75f98">NAME_HASH_SIZE_B64_MIN</a> = (4*<a class="code" href="namespaceons.html#a9530e6bb7b824044a03e87dde0bc99aa">NAME_HASH_SIZE</a> + 2) / 3; <span class="comment">// No padding</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="namespaceons.html#a903aa760038f51803e659a296696a15d">   41</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#a903aa760038f51803e659a296696a15d">NAME_HASH_SIZE_B64_MAX</a> = (<a class="code" href="namespaceons.html#a9530e6bb7b824044a03e87dde0bc99aa">NAME_HASH_SIZE</a> + 2) / 3 * 4; <span class="comment">// With padding</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="namespaceons.html#ae0d5f6f4add6d7d3f12c43911a2a4481">   43</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="namespaceons.html#ae0d5f6f4add6d7d3f12c43911a2a4481">SODIUM_ENCRYPTION_EXTRA_BYTES</a> = 40; <span class="comment">// crypto_aead_xchacha20poly1305_ietf_ABYTES (16) + crypto_aead_xchacha20poly1305_ietf_NPUBBYTES (24), but we don&#39;t include sodium here</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="namespaceons.html#ab9879b199f17237959f43d0b3c5433ec">   45</a></span>&#160;constexpr <span class="keywordtype">char</span> <a class="code" href="namespaceons.html#ab9879b199f17237959f43d0b3c5433ec">ONS_WALLET_TYPE_PRIMARY</a> = 0x00;</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="namespaceons.html#a56c20036c6a287db16692c92442ef47e">   46</a></span>&#160;constexpr <span class="keywordtype">char</span> <a class="code" href="namespaceons.html#a56c20036c6a287db16692c92442ef47e">ONS_WALLET_TYPE_SUBADDRESS</a> = 0x01;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="namespaceons.html#a543ff4ead8ad012d6b6479575787c356">   47</a></span>&#160;constexpr <span class="keywordtype">char</span> <a class="code" href="namespaceons.html#a543ff4ead8ad012d6b6479575787c356">ONS_WALLET_TYPE_INTEGRATED</a> = 0x02;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="structons_1_1mapping__value.html">   49</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structons_1_1mapping__value.html">mapping_value</a></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="structons_1_1mapping__value.html#a924e086e7051608bfb3e82a0a6a8729b">   51</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">size_t</span> constexpr <a class="code" href="structons_1_1mapping__value.html#a924e086e7051608bfb3e82a0a6a8729b">BUFFER_SIZE</a> = std::max({<a class="code" href="namespaceons.html#ae5c07ec3fec3791890c5ad122df34f7a">WALLET_ACCOUNT_BINARY_LENGTH_INC_PAYMENT_ID</a>, <a class="code" href="namespaceons.html#a89949edeb94e4417b1e3c010d3c747a0">LOKINET_ADDRESS_BINARY_LENGTH</a>, <a class="code" href="namespaceons.html#a363f99466b65d166a904ddc05be8cb0c">SESSION_PUBLIC_KEY_BINARY_LENGTH</a>}) + <a class="code" href="namespaceons.html#ae0d5f6f4add6d7d3f12c43911a2a4481">SODIUM_ENCRYPTION_EXTRA_BYTES</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="structons_1_1mapping__value.html#a0b8c992dcb27c34aba11a63b1a23db45">   52</a></span>&#160;  std::array&lt;uint8_t, BUFFER_SIZE&gt; <a class="code" href="structons_1_1mapping__value.html#a0b8c992dcb27c34aba11a63b1a23db45">buffer</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="structons_1_1mapping__value.html#aa1e6f12009708e4b34da2323f475ecc1">   53</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structons_1_1mapping__value.html#aa1e6f12009708e4b34da2323f475ecc1">encrypted</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="structons_1_1mapping__value.html#aabbbe005636dbcf2dcab08c7435bece4">   54</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structons_1_1mapping__value.html#aabbbe005636dbcf2dcab08c7435bece4">len</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="structons_1_1mapping__value.html#a591bde775f6d8b04ed65c9b3d79c164e">   56</a></span>&#160;  std::string      <a class="code" href="structons_1_1mapping__value.html#a591bde775f6d8b04ed65c9b3d79c164e">to_string</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> std::string{<a class="code" href="structons_1_1mapping__value.html#a3aeba2e72ad3ab85de7c18f213e3b22a">to_view</a>()}; }</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="structons_1_1mapping__value.html#a3aeba2e72ad3ab85de7c18f213e3b22a">   57</a></span>&#160;  std::string_view <a class="code" href="structons_1_1mapping__value.html#a3aeba2e72ad3ab85de7c18f213e3b22a">to_view</a>()<span class="keyword">   const </span>{ <span class="keywordflow">return</span> {<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<a class="code" href="structons_1_1mapping__value.html#a0b8c992dcb27c34aba11a63b1a23db45">buffer</a>.data()), <a class="code" href="structons_1_1mapping__value.html#aabbbe005636dbcf2dcab08c7435bece4">len</a>}; }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  std::string      <a class="code" href="structons_1_1mapping__value.html#a90ea4b35ba9571d660f4009e1d70174c">to_readable_value</a>(<a class="code" href="namespacecryptonote.html#a1823e8e194e85c09ac7231f927cca70a">cryptonote::network_type</a> nettype, <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> type) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">// View the buffer as a encrypted value &amp; nonce pair (the nonce is the last 24 bytes).  For older</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// session values the nonce will be all 0 bytes *if* the encrypted value is not the proper length</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// for an including-the-nonce value.  For newer session and all others the nonce is always</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// present.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  std::pair&lt;std::basic_string_view&lt;unsigned char&gt;, std::basic_string_view&lt;unsigned char&gt;&gt; <a class="code" href="structons_1_1mapping__value.html#a0f9148c6d4f167f9d18917796853b633">value_nonce</a>(<a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> type) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="structons_1_1mapping__value.html#a7ea6e6a8f7129c6ccc7606795db4f0d6">   64</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structons_1_1mapping__value.html#a7ea6e6a8f7129c6ccc7606795db4f0d6">operator==</a>(<a class="code" href="structons_1_1mapping__value.html">mapping_value</a> <span class="keyword">const</span> &amp;other)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="structons_1_1mapping__value.html#aa1e6f12009708e4b34da2323f475ecc1">encrypted</a> == other.<a class="code" href="structons_1_1mapping__value.html#aa1e6f12009708e4b34da2323f475ecc1">encrypted</a> &amp;&amp; other.<a class="code" href="structons_1_1mapping__value.html#a3aeba2e72ad3ab85de7c18f213e3b22a">to_view</a>() == <a class="code" href="structons_1_1mapping__value.html#a3aeba2e72ad3ab85de7c18f213e3b22a">to_view</a>(); }</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="structons_1_1mapping__value.html#a2ab22c3960fcfcf709379382e9633e72">   65</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structons_1_1mapping__value.html#a2ab22c3960fcfcf709379382e9633e72">operator==</a>(std::string_view other)<span class="keyword">     const </span>{ <span class="keywordflow">return</span> other == <a class="code" href="structons_1_1mapping__value.html#a3aeba2e72ad3ab85de7c18f213e3b22a">to_view</a>(); }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// Encrypts the mapping value in-place given the name, suitable for storing into the ONS DB.  Only</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">// basic overflow validation is attempted, values should be pre-validated in the validate*</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// functions.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// name - the lower-case ascii string of the record</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// name_hash - pointer to a pre-computed name hash, if available.  If nullptr then the hash is</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">//     computed as needed.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// deprecated_heavy - if true use the deprecated argon2 hashing for the encryption key; this</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">//     argument is required for hf15, but shouldn&#39;t be used afterwards (except for testing purposes).</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// Return true if encryption was successful, after which *this will now contain the encrypted value.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="comment">// If the value is *already* encrypted this fails via assert (in debug compilation) or returns</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="comment">// false.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// Note that, because encryption uses a random nonce, encrypting the same plaintext value multiple</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="comment">// times will result in different encrypted strings.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structons_1_1mapping__value.html#af314422a4005f9596af8011b0772b128">encrypt</a>(std::string_view <a class="code" href="namespacecryptonote_1_1anonymous__namespace_02simplewallet_8cpp_03.html#ab84787baef2d08dab790bcf6b8aa4fb2">name</a>, <span class="keyword">const</span> <a class="code" href="structcrypto_1_1hash.html">crypto::hash</a>* name_hash = <span class="keyword">nullptr</span>, <span class="keywordtype">bool</span> deprecated_heavy = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// Decrypts the mapping value given the name and mapping type.  If the name hash is pre-computed</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// it can be passed in.  As with encrypt(), name must be already lower-case.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// Returns true if decryption was successful, after which *this will now contain the decrypted value.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// If the value is *already* decrypted this fails via assert (in debug compilation) or returns</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// false.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structons_1_1mapping__value.html#a88017dc77b2c2f42d3eb7dd422d7eb64">decrypt</a>(std::string_view <a class="code" href="namespacecryptonote_1_1anonymous__namespace_02simplewallet_8cpp_03.html#ab84787baef2d08dab790bcf6b8aa4fb2">name</a>, <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> type, <span class="keyword">const</span> <a class="code" href="structcrypto_1_1hash.html">crypto::hash</a>* name_hash = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// Makes a copy of *this, calls encrypt() on it, and returns it.  Unlike encrypt(), this call</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// leaves `*this` unencrypted and instead returns an encrypted copy.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="structons_1_1mapping__value.html">mapping_value</a> <a class="code" href="structons_1_1mapping__value.html#a4075b56b4007466390d7174fd74e4690">make_encrypted</a>(std::string_view <a class="code" href="namespacecryptonote_1_1anonymous__namespace_02simplewallet_8cpp_03.html#ab84787baef2d08dab790bcf6b8aa4fb2">name</a>, <span class="keyword">const</span> <a class="code" href="structcrypto_1_1hash.html">crypto::hash</a>* name_hash = <span class="keyword">nullptr</span>, <span class="keywordtype">bool</span> deprecated_heavy = <span class="keyword">false</span>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// Makes a copy of *this, calls decrypt() on it, and returns it.  Unlike decrypt(), this call</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// leaves `*this` encrypted and instead returns an decrypted copy.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="structons_1_1mapping__value.html">mapping_value</a> <a class="code" href="structons_1_1mapping__value.html#a940773df0e021c603e2b6720780ec581">make_decrypted</a>(std::string_view <a class="code" href="namespacecryptonote_1_1anonymous__namespace_02simplewallet_8cpp_03.html#ab84787baef2d08dab790bcf6b8aa4fb2">name</a>, <span class="keyword">const</span> <a class="code" href="structcrypto_1_1hash.html">crypto::hash</a>* name_hash = <span class="keyword">nullptr</span>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  std::optional&lt;cryptonote::address_parse_info&gt; <a class="code" href="structons_1_1mapping__value.html#a217924d35d69188b6782def9a21dae34">get_wallet_address_info</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// Validate a human readable mapping value representation in &#39;value&#39; and write the binary form into &#39;blob&#39;.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// value: if type is session, 66 character hex string of an ed25519 public key (with 05 prefix)</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">//                   lokinet, 52 character base32z string of an ed25519 public key</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">//                   wallet,  the wallet public address string</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// blob: (optional) if function returns true, validate will load the binary data into blob (ready for encryption via encrypt())</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structons_1_1mapping__value.html#ab3f4f43539e5f3c2cb1ac8d6957d0985">validate</a>(<a class="code" href="namespacecryptonote.html#a1823e8e194e85c09ac7231f927cca70a">cryptonote::network_type</a> nettype, <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> type, std::string_view <a class="code" href="namespaceserialization.html#a2c903a13fe2f03de6d83908a3be64bcf">value</a>, <a class="code" href="structons_1_1mapping__value.html">mapping_value</a> *blob = <span class="keyword">nullptr</span>, std::string *reason = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// blob: (optional) if function returns true then the value will be loaded into the given</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// mapping_value, ready for decryption via decrypt().</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structons_1_1mapping__value.html#a285acc850ebfb53e778a797dc6dc6973">validate_encrypted</a>(<a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> type, std::string_view <a class="code" href="namespaceserialization.html#a2c903a13fe2f03de6d83908a3be64bcf">value</a>, <a class="code" href="structons_1_1mapping__value.html">mapping_value</a> *blob = <span class="keyword">nullptr</span>, std::string *reason = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="structons_1_1mapping__value.html#a2d19872322a23467c3186637dde8d1fc">mapping_value</a>();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="structons_1_1mapping__value.html#a2d19872322a23467c3186637dde8d1fc">mapping_value</a>(std::string encrypted_value, std::string nonce);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;};</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="namespaceons.html#a6f9b7728c33c526dd15abee49c621892">  119</a></span>&#160;<span class="keyword">inline</span> constexpr std::string_view <a class="code" href="namespaceons.html#a6f9b7728c33c526dd15abee49c621892">mapping_type_str</a>(<a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> type)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;{</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">switch</span>(type)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93a565a665b69ff84aa6dfc1bbeefa1aad1">mapping_type::lokinet</a>:         <span class="keywordflow">return</span> <span class="stringliteral">&quot;lokinet&quot;</span>sv; <span class="comment">// general type stored in the database; 1 year when in a purchase tx</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93acf559d3b337d32a0fdb144648e8feeaf">mapping_type::lokinet_2years</a>:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;lokinet_2years&quot;</span>sv;  <span class="comment">// Only used in a buy tx, not in the DB</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93a99b47701c943ad79f5ee6c6e4c2e1d8f">mapping_type::lokinet_5years</a>:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;lokinet_5years&quot;</span>sv;  <span class="comment">// &quot;</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93aa6534e289f586e369be7cc65a6dc9a58">mapping_type::lokinet_10years</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;lokinet_10years&quot;</span>sv; <span class="comment">// &quot;</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93a21d6f40cfb511982e4424e0e250a9557">mapping_type::session</a>:         <span class="keywordflow">return</span> <span class="stringliteral">&quot;session&quot;</span>sv;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93a402c5a6fe4c04c7d269c4532baecc8ee">mapping_type::wallet</a>:          <span class="keywordflow">return</span> <span class="stringliteral">&quot;wallet&quot;</span>sv;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">default</span>: assert(<span class="keyword">false</span>);             <span class="keywordflow">return</span> <span class="stringliteral">&quot;xx_unhandled_type&quot;</span>sv;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="namespaceons.html#a34b1e532ce1722725f35204c52f56d63">  133</a></span>&#160;constexpr <span class="keywordtype">bool</span> <a class="code" href="namespaceons.html#a34b1e532ce1722725f35204c52f56d63">mapping_type_allowed</a>(<a class="code" href="namespacecryptonote.html#a884c13f6c17c6ce8dd15f2e9bc4c75ef">cryptonote::hf</a> hf_version, <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> type) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">return</span> (type == <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93a21d6f40cfb511982e4424e0e250a9557">mapping_type::session</a> &amp;&amp; hf_version &gt;= <a class="code" href="namespacecryptonote.html#a884c13f6c17c6ce8dd15f2e9bc4c75efab25d5af1ff4fcfd3198edfba59d05886">cryptonote::hf::hf15_ons</a>)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      || (<a class="code" href="namespaceons.html#ac1dae0c40155aad214bf551ab1078abd">is_lokinet_type</a>(type) &amp;&amp; hf_version &gt;= <a class="code" href="namespacecryptonote.html#a884c13f6c17c6ce8dd15f2e9bc4c75efa744198ad488063e0b9d1b6f59ce6fc84">cryptonote::hf::hf16_pulse</a>)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      || (type == <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93a402c5a6fe4c04c7d269c4532baecc8ee">mapping_type::wallet</a> &amp;&amp; hf_version &gt;= <a class="code" href="namespacecryptonote.html#a884c13f6c17c6ce8dd15f2e9bc4c75efa6c8bd9f07f72402ef2f8db81b7fa6257">cryptonote::hf::hf18</a>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// Returns all mapping types supported for lookup as of the given hardfork.  (Note that this does</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">// not return the dedicated length types such as mapping_type::lokinet_5years as those are only</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">// relevant within a ONS buy tx).</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;std::vector&lt;mapping_type&gt; <a class="code" href="namespaceons.html#a728fd67fbf1fef8f0c4b0774ffbb60d0">all_mapping_types</a>(<a class="code" href="namespacecryptonote.html#a884c13f6c17c6ce8dd15f2e9bc4c75ef">cryptonote::hf</a> hf_version);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;sqlite3 *<a class="code" href="namespaceons.html#ae450f35e1f708d5b8f9f854776ac5345">init_oxen_name_system</a>(<span class="keyword">const</span> fs::path&amp; file_path, <span class="keywordtype">bool</span> read_only);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="namespaceons.html#a17121c7c0d89c4d39dc5dd72c4d19aa2">  149</a></span>&#160;constexpr uint16_t <a class="code" href="namespaceons.html#a17121c7c0d89c4d39dc5dd72c4d19aa2">db_mapping_type</a>(<a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">ons::mapping_type</a> type) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespaceons.html#ac1dae0c40155aad214bf551ab1078abd">is_lokinet_type</a>(type))</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(<a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93a565a665b69ff84aa6dfc1bbeefa1aad1">mapping_type::lokinet</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(type);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">// Returns the length of the given mapping type, in blocks, or std::nullopt if the mapping type never expires.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;std::optional&lt;uint64_t&gt; <a class="code" href="namespaceons.html#ac75415847a1185189cbafb64b29fff41">expiry_blocks</a>(<a class="code" href="namespacecryptonote.html#a1823e8e194e85c09ac7231f927cca70a">cryptonote::network_type</a> nettype, <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> type);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">// Returns *the* proper representation of a name_hash for querying the database, which is 44 base64</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">// characters (43 significant chars + a padding &#39;=&#39;).  External input values should always get</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">// converted to bytes and then back to base64 through this function (even if initially provided in</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">// base64) to ensure the correct exact representation.  Input must be exactly 32 bytes (a</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">// std::runtime_error is raised if this is not the case).</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;std::string <a class="code" href="namespaceons.html#afaf712021644e21862dc99657dfb727a">name_hash_bytes_to_base64</a>(std::string_view bytes);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">// Similar to the above, but takes a value as any of:</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">// - 32 bytes</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">// - 64 hex characters</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">// - 43 or 44 base64 characters (decoded value must be exactly 32 bytes)</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">// Returns a string of the canonical base64-encoded value *if* the input was valid, std::nullopt</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">// otherwise.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;std::optional&lt;std::string&gt; <a class="code" href="namespaceons.html#aa6316b06d749f836540199855e0c2ee3">name_hash_input_to_base64</a>(std::string_view input);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceons.html#aed4be8981d98b0577eca75418fb41eed">validate_ons_name</a>(<a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> type, std::string <a class="code" href="namespacecryptonote_1_1anonymous__namespace_02simplewallet_8cpp_03.html#ab84787baef2d08dab790bcf6b8aa4fb2">name</a>, std::string *reason = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;std::optional&lt;cryptonote::address_parse_info&gt; <a class="code" href="namespaceons.html#a454f3595df7c0a1a14f37b939329cd39">encrypted_wallet_value_to_info</a>(std::string <a class="code" href="namespacecryptonote_1_1anonymous__namespace_02simplewallet_8cpp_03.html#ab84787baef2d08dab790bcf6b8aa4fb2">name</a>, std::string encrypted_value, std::string nonce);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;generic_signature  <a class="code" href="namespaceons.html#a86725b235150e0f6d85b8c93a115bf03">make_ed25519_signature</a>(<a class="code" href="structcrypto_1_1hash.html">crypto::hash</a> <span class="keyword">const</span> &amp;hash, <a class="code" href="namespacecrypto.html#a075f95a5c71c1122b5f77074c4fc23b4">crypto::ed25519_secret_key</a> <span class="keyword">const</span> &amp;skey);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;generic_owner      <a class="code" href="namespaceons.html#a9efe9b6629c76827de5b2eaab2219afc">make_monero_owner</a>(<a class="code" href="structcryptonote_1_1account__public__address.html">cryptonote::account_public_address</a> <span class="keyword">const</span> &amp;owner, <span class="keywordtype">bool</span> is_subaddress);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;generic_owner      <a class="code" href="namespaceons.html#a93501e0ded065d327487c5db25ff7dd2">make_ed25519_owner</a>(<a class="code" href="structcrypto_1_1ed25519__public__key.html">crypto::ed25519_public_key</a> <span class="keyword">const</span> &amp;pkey);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="keywordtype">bool</span>               <a class="code" href="namespaceons.html#ad608997cae6fc1e3786ecb64189f1148">parse_owner_to_generic_owner</a>(<a class="code" href="namespacecryptonote.html#a1823e8e194e85c09ac7231f927cca70a">cryptonote::network_type</a> nettype, std::string_view owner, generic_owner &amp;key, std::string *reason);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;std::string        <a class="code" href="namespaceons.html#afa04817974e51ad4e41abb679877b2ff">tx_extra_signature</a>(std::string_view <a class="code" href="namespaceserialization.html#a2c903a13fe2f03de6d83908a3be64bcf">value</a>, generic_owner <span class="keyword">const</span> *owner, generic_owner <span class="keyword">const</span> *backup_owner, <a class="code" href="structcrypto_1_1hash.html">crypto::hash</a> <span class="keyword">const</span> &amp;prev_txid);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16db">  183</a></span>&#160;<span class="keyword">enum struct</span> <a class="code" href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16db">ons_tx_type</a> { <a class="code" href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16dbabd95200a60e47be9736970fd665f6195">lookup</a>, <a class="code" href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16dba0461ebd2b773878eac9f78a891912d65">buy</a>, <a class="code" href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16dba3ac340832f29c11538fbe2d6f75e8bcc">update</a>, <a class="code" href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16dbaa546cabc633a9d02345954ffa2c98f44">renew</a> };</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">// Converts a human readable case-insensitive string denoting the mapping type into a value suitable for storing into the ONS DB.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">// Currently accepts &quot;session&quot; or &quot;lokinet&quot; for lookups, buys, updates, and renewals; for buys and renewals also accepts &quot;lokinet_Ny[ear]&quot; for N=2,5,10</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">// Lookups are implied by none of buy/update/renew.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">// mapping_type: (optional) if function returns true, the uint16_t value of the &#39;type&#39; will be set</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="keywordtype">bool</span>         <a class="code" href="namespaceons.html#a88020d7d89529e10e19b84f3770a0a0f">validate_mapping_type</a>(std::string_view type, <a class="code" href="namespacecryptonote.html#a884c13f6c17c6ce8dd15f2e9bc4c75ef">cryptonote::hf</a> hf_version, <a class="code" href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16db">ons_tx_type</a> <a class="code" href="namespacecryptonote.html#ad85a93439d4fe0ec50cac84b46df913e">txtype</a>, <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> *<a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a>, std::string *reason);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">// Hashes an ONS name.  The name must already be lower-case (but this is only checked in debug builds).</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<a class="code" href="structcrypto_1_1hash.html">crypto::hash</a> <a class="code" href="namespaceons.html#a333a47bb814504a3fbe576e3e2254b9c">name_to_hash</a>(std::string_view <a class="code" href="namespacecryptonote_1_1anonymous__namespace_02simplewallet_8cpp_03.html#ab84787baef2d08dab790bcf6b8aa4fb2">name</a>, <span class="keyword">const</span> std::optional&lt;crypto::hash&gt;&amp; key = std::nullopt); <span class="comment">// Takes a human readable name and hashes it.  Takes an optional value to use as a key to produce a keyed hash.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;std::string  <a class="code" href="namespaceons.html#a67d0014e0fe6296f8ff6d755925009c2">name_to_base64_hash</a>(std::string_view <a class="code" href="namespacecryptonote_1_1anonymous__namespace_02simplewallet_8cpp_03.html#ab84787baef2d08dab790bcf6b8aa4fb2">name</a>); <span class="comment">// Takes a human readable name, hashes it and returns a base64 representation of the hash, suitable for storage into the ONS DB.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="structons_1_1owner__record.html">  194</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structons_1_1owner__record.html">owner_record</a></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="structons_1_1owner__record.html#acd81f5daf32f99e90edb6a9fcfd2a5bb">  196</a></span>&#160;  <span class="keyword">operator</span> <a class="code" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="structons_1_1owner__record.html#aab316bd022a381ef43ac3c931955b3c4">loaded</a>; }</div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="structons_1_1owner__record.html#aab316bd022a381ef43ac3c931955b3c4">  197</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structons_1_1owner__record.html#aab316bd022a381ef43ac3c931955b3c4">loaded</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="structons_1_1owner__record.html#a7bee187eea7bc7061c134c39acd7f10c">  199</a></span>&#160;  int64_t <a class="code" href="structons_1_1owner__record.html#a7bee187eea7bc7061c134c39acd7f10c">id</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="structons_1_1owner__record.html#a397ce866761d6eab824323c094b4daf1">  200</a></span>&#160;  <a class="code" href="structons_1_1generic__owner.html">generic_owner</a> <a class="code" href="structons_1_1owner__record.html#a397ce866761d6eab824323c094b4daf1">address</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;};</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="structons_1_1settings__record.html">  203</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structons_1_1settings__record.html">settings_record</a></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="structons_1_1settings__record.html#a764e98685f3edc68681e0d3ba16ab4c0">  205</a></span>&#160;  <span class="keyword">operator</span> <a class="code" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="structons_1_1settings__record.html#aaada0e961b1a92f0cda777a9501f94f7">loaded</a>; }</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="structons_1_1settings__record.html#aaada0e961b1a92f0cda777a9501f94f7">  206</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structons_1_1settings__record.html#aaada0e961b1a92f0cda777a9501f94f7">loaded</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="structons_1_1settings__record.html#acff9cf7c4ef13dd01e3071ffd75780b9">  208</a></span>&#160;  uint64_t     <a class="code" href="structons_1_1settings__record.html#acff9cf7c4ef13dd01e3071ffd75780b9">top_height</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="structons_1_1settings__record.html#a73b5ac638fbdb440505df5ff5e20eb7a">  209</a></span>&#160;  <a class="code" href="structcrypto_1_1hash.html">crypto::hash</a> <a class="code" href="structons_1_1settings__record.html#a73b5ac638fbdb440505df5ff5e20eb7a">top_hash</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="structons_1_1settings__record.html#ab5d14d75d0ca7e8b2aee0f700d607f35">  210</a></span>&#160;  <span class="keywordtype">int</span>          <a class="code" href="structons_1_1settings__record.html#ab5d14d75d0ca7e8b2aee0f700d607f35">version</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;};</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html">  213</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structons_1_1mapping__record.html">mapping_record</a></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;{</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="comment">// NOTE: We keep expired entries in the DB indefinitely because we need to</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="comment">// keep all ONS entries indefinitely to support large blockchain detachments.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// A mapping_record forms a linked list of TXID&#39;s which allows us to revert</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="comment">// the ONS DB to any arbitrary height at a small additional storage cost.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// return: if the record exists and hasn&#39;t expired.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structons_1_1mapping__record.html#a200c8985afa606db2cd77a1d33a20cd4">active</a>(uint64_t blockchain_height) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#ad4def0bb493707cf3d90b81163a82ca0">  221</a></span>&#160;  <span class="keyword">operator</span> <a class="code" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="structons_1_1mapping__record.html#add436127b1520dc3cbf56916ca006286">loaded</a>; }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#add436127b1520dc3cbf56916ca006286">  223</a></span>&#160;  <span class="keywordtype">bool</span>          <a class="code" href="structons_1_1mapping__record.html#add436127b1520dc3cbf56916ca006286">loaded</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#af618bda5376130be8a32fe04d34bb4b3">  224</a></span>&#160;  int64_t       <a class="code" href="structons_1_1mapping__record.html#af618bda5376130be8a32fe04d34bb4b3">id</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#a90d362f9da5322e97d481d57d7fcd386">  225</a></span>&#160;  <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a>  <a class="code" href="structons_1_1mapping__record.html#a90d362f9da5322e97d481d57d7fcd386">type</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#af4e543c249c1f53e689e02f50657a8cc">  226</a></span>&#160;  std::string   <a class="code" href="structons_1_1mapping__record.html#af4e543c249c1f53e689e02f50657a8cc">name_hash</a>; <span class="comment">// name hashed and represented in base64 encoding</span></div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#a49a1460ab3f53523eee57e04791e000e">  227</a></span>&#160;  <a class="code" href="structons_1_1mapping__value.html">mapping_value</a> <a class="code" href="structons_1_1mapping__record.html#a49a1460ab3f53523eee57e04791e000e">encrypted_value</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#a4400cb23df2d0d7ba0afbe3f4c9c8b22">  228</a></span>&#160;  uint64_t      <a class="code" href="structons_1_1mapping__record.html#a4400cb23df2d0d7ba0afbe3f4c9c8b22">register_height</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#ae1d41c9b3e411c936786352341b197d9">  229</a></span>&#160;  std::optional&lt;uint64_t&gt; <a class="code" href="structons_1_1mapping__record.html#ae1d41c9b3e411c936786352341b197d9">expiration_height</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#abe6139bfb32959833e0e9b494d3460f8">  230</a></span>&#160;  uint64_t      <a class="code" href="structons_1_1mapping__record.html#abe6139bfb32959833e0e9b494d3460f8">update_height</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#acef787907d3d09d1b9914fd01ca3a372">  231</a></span>&#160;  <a class="code" href="structcrypto_1_1hash.html">crypto::hash</a>  <a class="code" href="structons_1_1mapping__record.html#acef787907d3d09d1b9914fd01ca3a372">txid</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#adde04534576a128b71ae2d1f25a5d1f5">  232</a></span>&#160;  <a class="code" href="structcrypto_1_1hash.html">crypto::hash</a>  <a class="code" href="structons_1_1mapping__record.html#adde04534576a128b71ae2d1f25a5d1f5">prev_txid</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#a5d59743ab85715a043daa3b98edddeea">  233</a></span>&#160;  int64_t       <a class="code" href="structons_1_1mapping__record.html#a5d59743ab85715a043daa3b98edddeea">owner_id</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#ad275d9b0123c1c01998283778bb35704">  234</a></span>&#160;  int64_t       <a class="code" href="structons_1_1mapping__record.html#ad275d9b0123c1c01998283778bb35704">backup_owner_id</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#a6f01c720d5f2a55980a9b5e905305112">  235</a></span>&#160;  <a class="code" href="structons_1_1generic__owner.html">generic_owner</a> <a class="code" href="structons_1_1mapping__record.html#a6f01c720d5f2a55980a9b5e905305112">owner</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="structons_1_1mapping__record.html#a351a7f71c71f9f542cdfc5f3fcc76c23">  236</a></span>&#160;  <a class="code" href="structons_1_1generic__owner.html">generic_owner</a> <a class="code" href="structons_1_1mapping__record.html#a351a7f71c71f9f542cdfc5f3fcc76c23">backup_owner</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;};</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="keyword">struct </span><a class="code" href="structons_1_1name__system__db.html">name_system_db</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="classons_1_1sql__compiled__statement.html">  240</a></span>&#160;<span class="keyword">class </span><a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> final</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="classons_1_1sql__compiled__statement.html#a2613cabfac4f27b98a2ddf2c45fff916">  244</a></span>&#160;  <a class="code" href="structons_1_1name__system__db.html">name_system_db</a>&amp; <a class="code" href="classons_1_1sql__compiled__statement.html#a2613cabfac4f27b98a2ddf2c45fff916">nsdb</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="classons_1_1sql__compiled__statement.html#a5fe15970411a12233db16b67d30afc29">  246</a></span>&#160;  sqlite3_stmt* <a class="code" href="classons_1_1sql__compiled__statement.html#a5fe15970411a12233db16b67d30afc29">statement</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="classons_1_1sql__compiled__statement.html#a638b34d6476a2f52169ba58cadea9a95">  249</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classons_1_1sql__compiled__statement.html#a638b34d6476a2f52169ba58cadea9a95">sql_compiled_statement</a>(<a class="code" href="structons_1_1name__system__db.html">name_system_db</a>&amp; <a class="code" href="classons_1_1sql__compiled__statement.html#a2613cabfac4f27b98a2ddf2c45fff916">nsdb</a>) : <a class="code" href="classons_1_1sql__compiled__statement.html#a2613cabfac4f27b98a2ddf2c45fff916">nsdb</a>{<a class="code" href="classons_1_1sql__compiled__statement.html#a2613cabfac4f27b98a2ddf2c45fff916">nsdb</a>} {}</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html#a638b34d6476a2f52169ba58cadea9a95">sql_compiled_statement</a>(<span class="keyword">const</span> <a class="code" href="classons_1_1sql__compiled__statement.html#a638b34d6476a2f52169ba58cadea9a95">sql_compiled_statement</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html#a638b34d6476a2f52169ba58cadea9a95">sql_compiled_statement</a>&amp; <a class="code" href="classons_1_1sql__compiled__statement.html#a5ef02222ce61bcbaf097835d27ef5da3">operator=</a>(<span class="keyword">const</span> <a class="code" href="classons_1_1sql__compiled__statement.html#a638b34d6476a2f52169ba58cadea9a95">sql_compiled_statement</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="classons_1_1sql__compiled__statement.html#a4a9d4149bacf71c5d17e6e9886c41451">  257</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html#a4a9d4149bacf71c5d17e6e9886c41451">sql_compiled_statement</a>(<a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a>&amp;&amp; from) : <a class="code" href="classons_1_1sql__compiled__statement.html#a2613cabfac4f27b98a2ddf2c45fff916">nsdb</a>{from.nsdb}, <a class="code" href="classons_1_1sql__compiled__statement.html#a5fe15970411a12233db16b67d30afc29">statement</a>{from.statement} { from.statement = <span class="keyword">nullptr</span>; }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html#a638b34d6476a2f52169ba58cadea9a95">sql_compiled_statement</a>&amp; <a class="code" href="classons_1_1sql__compiled__statement.html#a5ef02222ce61bcbaf097835d27ef5da3">operator=</a>(<a class="code" href="classons_1_1sql__compiled__statement.html#a638b34d6476a2f52169ba58cadea9a95">sql_compiled_statement</a>&amp;&amp; from);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html#ae29f9256d18259574055f2786b39518f">~sql_compiled_statement</a>();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classons_1_1sql__compiled__statement.html#a1f70eb3624bd5802ba53b472f9c27730">compile</a>(std::string_view query, <span class="keywordtype">bool</span> optimise_for_multiple_usage = <span class="keyword">true</span>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="classons_1_1sql__compiled__statement.html#ac0a7dad73e281ac6fc83748209dd20da">  272</a></span>&#160;  <span class="keyword">explicit</span> <span class="keyword">operator</span> <a class="code" href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classons_1_1sql__compiled__statement.html#a5fe15970411a12233db16b67d30afc29">statement</a> != <span class="keyword">nullptr</span>; }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;};</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html">  276</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structons_1_1name__system__db.html">name_system_db</a></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordtype">bool</span>                        <a class="code" href="structons_1_1name__system__db.html#aeb4ece2927321ff93ce6cf921ab95abb">init</a>        (<a class="code" href="classcryptonote_1_1Blockchain.html">cryptonote::Blockchain</a> <span class="keyword">const</span> *blockchain, <a class="code" href="namespacecryptonote.html#a1823e8e194e85c09ac7231f927cca70a">cryptonote::network_type</a> <a class="code" href="structons_1_1name__system__db.html#a4bd4a24f8e7603ebd28b1b01630fdce3">nettype</a>, sqlite3 *<a class="code" href="namespacedb.html">db</a>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordtype">bool</span>                        <a class="code" href="structons_1_1name__system__db.html#a32b43227e6fd8dae53751523981cd1cd">add_block</a>   (<span class="keyword">const</span> <a class="code" href="structcryptonote_1_1block.html">cryptonote::block</a>&amp; block, <span class="keyword">const</span> std::vector&lt;cryptonote::transaction&gt;&amp; txs);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a496f0c1089fe0e52831c966291a95efa">  281</a></span>&#160;  <a class="code" href="namespacecryptonote.html#a1823e8e194e85c09ac7231f927cca70a">cryptonote::network_type</a>    <a class="code" href="structons_1_1name__system__db.html#a496f0c1089fe0e52831c966291a95efa">network_type</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="structons_1_1name__system__db.html#a4bd4a24f8e7603ebd28b1b01630fdce3">nettype</a>; }</div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a64bf7a2e6fe254e473f1efffff480d22">  282</a></span>&#160;  uint64_t                    <a class="code" href="structons_1_1name__system__db.html#a64bf7a2e6fe254e473f1efffff480d22">height</a>      ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="structons_1_1name__system__db.html#a49fb0336d981f4cb1ae2ee1c7db3262a">last_processed_height</a>; }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// Signifies the blockchain has reorganized commences the rollback and pruning procedures.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordtype">void</span>                        <a class="code" href="structons_1_1name__system__db.html#aed17a6fa320a4f295287fe6a7ef06913">block_detach</a>   (<a class="code" href="classcryptonote_1_1Blockchain.html">cryptonote::Blockchain</a> <span class="keyword">const</span> &amp;blockchain, uint64_t new_blockchain_height);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordtype">bool</span>                        <a class="code" href="structons_1_1name__system__db.html#a94ac66f031e5bc2074caffc361b43f8a">save_owner</a>     (<a class="code" href="structons_1_1generic__owner.html">generic_owner</a> <span class="keyword">const</span> &amp;owner, int64_t *row_id);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordtype">bool</span>                        <a class="code" href="structons_1_1name__system__db.html#aad09a96deab9a372de8eb32d1d43218a">save_mapping</a>   (<a class="code" href="structcrypto_1_1hash.html">crypto::hash</a> <span class="keyword">const</span> &amp;<a class="code" href="namespacewallet25.html#a069a9cf6e98b6412419b457042c3ea4e">tx_hash</a>, <a class="code" href="structcryptonote_1_1tx__extra__oxen__name__system.html">cryptonote::tx_extra_oxen_name_system</a> <span class="keyword">const</span> &amp;src, uint64_t <a class="code" href="structons_1_1name__system__db.html#a64bf7a2e6fe254e473f1efffff480d22">height</a>, std::optional&lt;uint64_t&gt; expiration_height, int64_t owner_id, std::optional&lt;int64_t&gt; backup_owner_id);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordtype">bool</span>                        <a class="code" href="structons_1_1name__system__db.html#a07fd6960fd4a9e429a1df0765e54a85c">save_settings</a>  (uint64_t top_height, <a class="code" href="structcrypto_1_1hash.html">crypto::hash</a> <span class="keyword">const</span> &amp;top_hash, <span class="keywordtype">int</span> version);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// Delete all mappings that are registered on height or newer followed by deleting all owners no longer referenced in the DB</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordtype">bool</span>                        <a class="code" href="structons_1_1name__system__db.html#aea9c381d4915b176b02d43b68af4376c">prune_db</a>(uint64_t <a class="code" href="structons_1_1name__system__db.html#a64bf7a2e6fe254e473f1efffff480d22">height</a>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="structons_1_1owner__record.html">owner_record</a>                <a class="code" href="structons_1_1name__system__db.html#a767216f06585c123ab7bbb71518210f6">get_owner_by_key</a>      (<a class="code" href="structons_1_1generic__owner.html">generic_owner</a> <span class="keyword">const</span> &amp;owner);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="structons_1_1owner__record.html">owner_record</a>                <a class="code" href="structons_1_1name__system__db.html#aac30024152f71c9a59d0af813ed83715">get_owner_by_id</a>       (int64_t owner_id);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// Returns a wallet address from the passed ONS name in &quot;str&quot;</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordtype">bool</span>  <a class="code" href="structons_1_1name__system__db.html#a66b380db0bc98d06a789c11c1a82ca6d">get_wallet_mapping</a>    (std::string str, uint64_t blockchain_height, <a class="code" href="structcryptonote_1_1address__parse__info.html">cryptonote::address_parse_info</a>&amp; addr_info);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// The get_mapping* methods can return any mapping, or only active mappings: for only active</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// mappings, pass in the blockchain height.  If you omit it (or explicitly pass std::nullopt) then</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// you will get the latest mappingsvalues regardless of whether expired or not they are expired.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="structons_1_1mapping__record.html">mapping_record</a>              <a class="code" href="structons_1_1name__system__db.html#a6d3536643e4f6fc9ca68ef04b01b245f">get_mapping</a>           (<a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> type, std::string_view name_base64_hash, std::optional&lt;uint64_t&gt; blockchain_height = std::nullopt);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  std::vector&lt;mapping_record&gt; <a class="code" href="structons_1_1name__system__db.html#a3521e851e3951b20fb2ca7e68ef3cb93">get_mappings</a>          (std::vector&lt;mapping_type&gt; <span class="keyword">const</span> &amp;types, std::string_view name_base64_hash, std::optional&lt;uint64_t&gt; blockchain_height = std::nullopt);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  std::vector&lt;mapping_record&gt; <a class="code" href="structons_1_1name__system__db.html#a72fe49afff25485b9b83eef2dd0b87af">get_mappings_by_owner</a> (<a class="code" href="structons_1_1generic__owner.html">generic_owner</a> <span class="keyword">const</span> &amp;key, std::optional&lt;uint64_t&gt; blockchain_height = std::nullopt);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  std::vector&lt;mapping_record&gt; <a class="code" href="structons_1_1name__system__db.html#a5c3e2abd0f79f12bf0ef76874ce077d6">get_mappings_by_owners</a>(std::vector&lt;generic_owner&gt; <span class="keyword">const</span> &amp;keys, std::optional&lt;uint64_t&gt; blockchain_height = std::nullopt);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <a class="code" href="structons_1_1settings__record.html">settings_record</a>             <a class="code" href="structons_1_1name__system__db.html#a2c7e5ec49e8e12f63a662993fb83a7ad">get_settings</a>          ();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// Returns the count of each type of ONS registration that is currently active.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  std::map&lt;mapping_type, int&gt; <a class="code" href="structons_1_1name__system__db.html#a8e78c8b168ed06a26891b67eac90e247">get_mapping_counts</a>(uint64_t blockchain_height);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="comment">// Resolves a mapping of the given type and name hash. Returns a null optional if the value was</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="comment">// not found or expired, otherwise returns the encrypted value.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  std::optional&lt;mapping_value&gt; <a class="code" href="structons_1_1name__system__db.html#a5ed5d5c7d4aa194b5f37de803703934c">resolve</a>(<a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a> type, std::string_view name_hash_b64, uint64_t blockchain_height);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// Validates an ONS transaction.  If the function returns true then entry will be populated with</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// the ONS details.  On a false return, `reason` is instead populated with the failure reason.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structons_1_1name__system__db.html#a0fa44b6bb4dbcdf93dfd80c96bfb9c88">validate_ons_tx</a>(<a class="code" href="namespacecryptonote.html#a884c13f6c17c6ce8dd15f2e9bc4c75ef">cryptonote::hf</a> hf_version, uint64_t blockchain_height, <a class="code" href="classcryptonote_1_1transaction.html">cryptonote::transaction</a> <span class="keyword">const</span> &amp;tx, <a class="code" href="structcryptonote_1_1tx__extra__oxen__name__system.html">cryptonote::tx_extra_oxen_name_system</a> &amp;entry, std::string *reason);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// Destructor; closes the sqlite3 database if one is open</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="structons_1_1name__system__db.html#afc357f6c5c26d48b2ba8895f733b37b8">~name_system_db</a>();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#af8150b76acb876aeb55c02261c9d3af8">  320</a></span>&#160;  sqlite3 *<a class="code" href="namespacedb.html">db</a>               = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#ac3c73914961ece3927be29a9ca421369">  321</a></span>&#160;  <span class="keywordtype">bool</span>    <a class="code" href="structons_1_1name__system__db.html#ac3c73914961ece3927be29a9ca421369">transaction_begun</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a4bd4a24f8e7603ebd28b1b01630fdce3">  323</a></span>&#160;  <a class="code" href="namespacecryptonote.html#a1823e8e194e85c09ac7231f927cca70a">cryptonote::network_type</a> <a class="code" href="structons_1_1name__system__db.html#a4bd4a24f8e7603ebd28b1b01630fdce3">nettype</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a49fb0336d981f4cb1ae2ee1c7db3262a">  324</a></span>&#160;  uint64_t <a class="code" href="structons_1_1name__system__db.html#a49fb0336d981f4cb1ae2ee1c7db3262a">last_processed_height</a> = 0;</div>
<div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a380f655a4e5b686fbe68a1468f205dd0">  325</a></span>&#160;  <a class="code" href="structcrypto_1_1hash.html">crypto::hash</a> <a class="code" href="structons_1_1name__system__db.html#a380f655a4e5b686fbe68a1468f205dd0">last_processed_hash</a>{};</div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#ab1062e900ddf738d3f3d408a2a401820">  326</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#ab1062e900ddf738d3f3d408a2a401820">save_owner_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#aaba76d0d7d3bba59f55af1a994eb445d">  327</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#aaba76d0d7d3bba59f55af1a994eb445d">save_mapping_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#afe1d03bac08709ca7a92b6866607aacd">  328</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#afe1d03bac08709ca7a92b6866607aacd">save_settings_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a6589d342f5c36a00e3b09cc3ddba0b99">  329</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#a6589d342f5c36a00e3b09cc3ddba0b99">get_owner_by_key_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a132297836b45d157d5e02943bea2d704">  330</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#a132297836b45d157d5e02943bea2d704">get_owner_by_id_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a99211a8d3c3c2da6d4e773a3c67740d4">  331</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#a99211a8d3c3c2da6d4e773a3c67740d4">get_mapping_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a539bb55985ade25f049c6e0bc26606a9">  332</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#a539bb55985ade25f049c6e0bc26606a9">resolve_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#ac6fc0893c52f5ce7d5871ef462686bd7">  333</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#ac6fc0893c52f5ce7d5871ef462686bd7">get_settings_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#af593a991a08b95f92854d952e1086902">  334</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#af593a991a08b95f92854d952e1086902">prune_mappings_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a83091775badafbcf0c259268b22e3782">  335</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#a83091775badafbcf0c259268b22e3782">prune_owners_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#ab2e844d3d391578f831565e0e6ef0482">  336</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#ab2e844d3d391578f831565e0e6ef0482">get_mappings_by_owner_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a5eb0b79786b37e66be5e011aecd3f5ac">  337</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#a5eb0b79786b37e66be5e011aecd3f5ac">get_mapping_counts_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="structons_1_1name__system__db.html#a4a2466236fad82579af8aba39312ce63">  338</a></span>&#160;  <a class="code" href="classons_1_1sql__compiled__statement.html">sql_compiled_statement</a> <a class="code" href="structons_1_1name__system__db.html#a4a2466236fad82579af8aba39312ce63">get_mappings_on_height_and_newer_sql</a>{*<span class="keyword">this</span>};</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;};</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}; <span class="comment">// namespace ons</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="structfmt_1_1formatter_3_01ons_1_1mapping__value_01_4.html">  344</a></span>&#160;<span class="keyword">struct </span>fmt::formatter&lt;<a class="code" href="namespaceons.html">ons</a>::mapping_value&gt; : fmt::formatter&lt;std::string&gt; {</div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="structfmt_1_1formatter_3_01ons_1_1mapping__value_01_4.html#aa37de2115d356b66056e241ec27ca7e3">  345</a></span>&#160;  <span class="keyword">auto</span> <a class="code" href="structfmt_1_1formatter_3_01ons_1_1mapping__value_01_4.html#aa37de2115d356b66056e241ec27ca7e3">format</a>(<span class="keyword">const</span> <a class="code" href="structons_1_1mapping__value.html">ons::mapping_value</a>&amp; v, format_context&amp; ctx) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> formatter&lt;std::string&gt;::format(</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        oxenc::to_hex(v.<a class="code" href="structons_1_1mapping__value.html#a3aeba2e72ad3ab85de7c18f213e3b22a">to_view</a>()), ctx);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;};</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="structfmt_1_1formatter_3_01ons_1_1mapping__type_01_4.html">  351</a></span>&#160;<span class="keyword">struct </span>fmt::formatter&lt;<a class="code" href="namespaceons.html">ons</a>::<a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">mapping_type</a>&gt; : fmt::formatter&lt;std::string_view&gt; {</div>
<div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="structfmt_1_1formatter_3_01ons_1_1mapping__type_01_4.html#a4f17b418b334450cb5dbc34b804000ce">  352</a></span>&#160;  <span class="keyword">auto</span> <a class="code" href="structfmt_1_1formatter_3_01ons_1_1mapping__type_01_4.html#a4f17b418b334450cb5dbc34b804000ce">format</a>(<span class="keyword">const</span> <a class="code" href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">ons::mapping_type</a>&amp; t, format_context&amp; ctx) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">return</span> formatter&lt;std::string_view&gt;::format(</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <a class="code" href="namespaceons.html#a6f9b7728c33c526dd15abee49c621892">ons::mapping_type_str</a>(t), ctx);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;};</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor">#endif // OXEN_NAME_SYSTEM_H</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="astructons_1_1name__system__db_html_aea9c381d4915b176b02d43b68af4376c"><div class="ttname"><a href="structons_1_1name__system__db.html#aea9c381d4915b176b02d43b68af4376c">ons::name_system_db::prune_db</a></div><div class="ttdeci">bool prune_db(uint64_t height)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2247</div></div>
<div class="ttc" id="anamespacecryptonote_html_a884c13f6c17c6ce8dd15f2e9bc4c75ef"><div class="ttname"><a href="namespacecryptonote.html#a884c13f6c17c6ce8dd15f2e9bc4c75ef">cryptonote::hf</a></div><div class="ttdeci">hf</div><div class="ttdef"><b>Definition:</b> cryptonote_config.h:189</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a4a2466236fad82579af8aba39312ce63"><div class="ttname"><a href="structons_1_1name__system__db.html#a4a2466236fad82579af8aba39312ce63">ons::name_system_db::get_mappings_on_height_and_newer_sql</a></div><div class="ttdeci">sql_compiled_statement get_mappings_on_height_and_newer_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:338</div></div>
<div class="ttc" id="anamespaceons_html_ad8fc8eb3b31df5126f1e7dfa37ff16dbabd95200a60e47be9736970fd665f6195"><div class="ttname"><a href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16dbabd95200a60e47be9736970fd665f6195">ons::ons_tx_type::lookup</a></div><div class="ttdeci">@ lookup</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_af4e543c249c1f53e689e02f50657a8cc"><div class="ttname"><a href="structons_1_1mapping__record.html#af4e543c249c1f53e689e02f50657a8cc">ons::mapping_record::name_hash</a></div><div class="ttdeci">std::string name_hash</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:226</div></div>
<div class="ttc" id="astructons_1_1settings__record_html_a73b5ac638fbdb440505df5ff5e20eb7a"><div class="ttname"><a href="structons_1_1settings__record.html#a73b5ac638fbdb440505df5ff5e20eb7a">ons::settings_record::top_hash</a></div><div class="ttdeci">crypto::hash top_hash</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:209</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a767216f06585c123ab7bbb71518210f6"><div class="ttname"><a href="structons_1_1name__system__db.html#a767216f06585c123ab7bbb71518210f6">ons::name_system_db::get_owner_by_key</a></div><div class="ttdeci">owner_record get_owner_by_key(generic_owner const &amp;owner)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2256</div></div>
<div class="ttc" id="aclasscryptonote_1_1Blockchain_html"><div class="ttname"><a href="classcryptonote_1_1Blockchain.html">cryptonote::Blockchain</a></div><div class="ttdef"><b>Definition:</b> blockchain.h:111</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a2c7e5ec49e8e12f63a662993fb83a7ad"><div class="ttname"><a href="structons_1_1name__system__db.html#a2c7e5ec49e8e12f63a662993fb83a7ad">ons::name_system_db::get_settings</a></div><div class="ttdeci">settings_record get_settings()</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2443</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a5ed5d5c7d4aa194b5f37de803703934c"><div class="ttname"><a href="structons_1_1name__system__db.html#a5ed5d5c7d4aa194b5f37de803703934c">ons::name_system_db::resolve</a></div><div class="ttdeci">std::optional&lt; mapping_value &gt; resolve(mapping_type type, std::string_view name_hash_b64, uint64_t blockchain_height)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2301</div></div>
<div class="ttc" id="anamespaceons_html_a6649a7975e76df11e78ae9bbe376f72f"><div class="ttname"><a href="namespaceons.html#a6649a7975e76df11e78ae9bbe376f72f">ons::WALLET_NAME_MAX</a></div><div class="ttdeci">constexpr size_t WALLET_NAME_MAX</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:30</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a99211a8d3c3c2da6d4e773a3c67740d4"><div class="ttname"><a href="structons_1_1name__system__db.html#a99211a8d3c3c2da6d4e773a3c67740d4">ons::name_system_db::get_mapping_sql</a></div><div class="ttdeci">sql_compiled_statement get_mapping_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:331</div></div>
<div class="ttc" id="anamespaceons_html_afa04817974e51ad4e41abb679877b2ff"><div class="ttname"><a href="namespaceons.html#afa04817974e51ad4e41abb679877b2ff">ons::tx_extra_signature</a></div><div class="ttdeci">std::string tx_extra_signature(std::string_view value, ons::generic_owner const *owner, ons::generic_owner const *backup_owner, crypto::hash const &amp;prev_txid)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:662</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a5c3e2abd0f79f12bf0ef76874ce077d6"><div class="ttname"><a href="structons_1_1name__system__db.html#a5c3e2abd0f79f12bf0ef76874ce077d6">ons::name_system_db::get_mappings_by_owners</a></div><div class="ttdeci">std::vector&lt; mapping_record &gt; get_mappings_by_owners(std::vector&lt; generic_owner &gt; const &amp;keys, std::optional&lt; uint64_t &gt; blockchain_height=std::nullopt)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2371</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a90ea4b35ba9571d660f4009e1d70174c"><div class="ttname"><a href="structons_1_1mapping__value.html#a90ea4b35ba9571d660f4009e1d70174c">ons::mapping_value::to_readable_value</a></div><div class="ttdeci">std::string to_readable_value(cryptonote::network_type nettype, mapping_type type) const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:111</div></div>
<div class="ttc" id="afs_8h_html"><div class="ttname"><a href="fs_8h.html">fs.h</a></div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a72fe49afff25485b9b83eef2dd0b87af"><div class="ttname"><a href="structons_1_1name__system__db.html#a72fe49afff25485b9b83eef2dd0b87af">ons::name_system_db::get_mappings_by_owner</a></div><div class="ttdeci">std::vector&lt; mapping_record &gt; get_mappings_by_owner(generic_owner const &amp;key, std::optional&lt; uint64_t &gt; blockchain_height=std::nullopt)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2423</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a3aeba2e72ad3ab85de7c18f213e3b22a"><div class="ttname"><a href="structons_1_1mapping__value.html#a3aeba2e72ad3ab85de7c18f213e3b22a">ons::mapping_value::to_view</a></div><div class="ttdeci">std::string_view to_view() const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:57</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_abe6139bfb32959833e0e9b494d3460f8"><div class="ttname"><a href="structons_1_1mapping__record.html#abe6139bfb32959833e0e9b494d3460f8">ons::mapping_record::update_height</a></div><div class="ttdeci">uint64_t update_height</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:230</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_afc357f6c5c26d48b2ba8895f733b37b8"><div class="ttname"><a href="structons_1_1name__system__db.html#afc357f6c5c26d48b2ba8895f733b37b8">ons::name_system_db::~name_system_db</a></div><div class="ttdeci">~name_system_db()</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1945</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_af314422a4005f9596af8011b0772b128"><div class="ttname"><a href="structons_1_1mapping__value.html#af314422a4005f9596af8011b0772b128">ons::mapping_value::encrypt</a></div><div class="ttdeci">bool encrypt(std::string_view name, const crypto::hash *name_hash=nullptr, bool deprecated_heavy=false)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1418</div></div>
<div class="ttc" id="anamespaceons_html_a93501e0ded065d327487c5db25ff7dd2"><div class="ttname"><a href="namespaceons.html#a93501e0ded065d327487c5db25ff7dd2">ons::make_ed25519_owner</a></div><div class="ttdeci">ons::generic_owner make_ed25519_owner(crypto::ed25519_public_key const &amp;pkey)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:698</div></div>
<div class="ttc" id="anamespacecryptonote_html_a884c13f6c17c6ce8dd15f2e9bc4c75efa6c8bd9f07f72402ef2f8db81b7fa6257"><div class="ttname"><a href="namespacecryptonote.html#a884c13f6c17c6ce8dd15f2e9bc4c75efa6c8bd9f07f72402ef2f8db81b7fa6257">cryptonote::hf::hf18</a></div><div class="ttdeci">@ hf18</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a32b43227e6fd8dae53751523981cd1cd"><div class="ttname"><a href="structons_1_1name__system__db.html#a32b43227e6fd8dae53751523981cd1cd">ons::name_system_db::add_block</a></div><div class="ttdeci">bool add_block(const cryptonote::block &amp;block, const std::vector&lt; cryptonote::transaction &gt; &amp;txs)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2122</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a132297836b45d157d5e02943bea2d704"><div class="ttname"><a href="structons_1_1name__system__db.html#a132297836b45d157d5e02943bea2d704">ons::name_system_db::get_owner_by_id_sql</a></div><div class="ttdeci">sql_compiled_statement get_owner_by_id_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:330</div></div>
<div class="ttc" id="anamespaceons_html_a9efe9b6629c76827de5b2eaab2219afc"><div class="ttname"><a href="namespaceons.html#a9efe9b6629c76827de5b2eaab2219afc">ons::make_monero_owner</a></div><div class="ttdeci">ons::generic_owner make_monero_owner(cryptonote::account_public_address const &amp;owner, bool is_subaddress)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:689</div></div>
<div class="ttc" id="astructons_1_1owner__record_html_a7bee187eea7bc7061c134c39acd7f10c"><div class="ttname"><a href="structons_1_1owner__record.html#a7bee187eea7bc7061c134c39acd7f10c">ons::owner_record::id</a></div><div class="ttdeci">int64_t id</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:199</div></div>
<div class="ttc" id="aclassons_1_1sql__compiled__statement_html_ae29f9256d18259574055f2786b39518f"><div class="ttname"><a href="classons_1_1sql__compiled__statement.html#ae29f9256d18259574055f2786b39518f">ons::sql_compiled_statement::~sql_compiled_statement</a></div><div class="ttdeci">~sql_compiled_statement()</div><div class="ttdoc">Destroys the internal sqlite3 statement on destruction.</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:560</div></div>
<div class="ttc" id="anamespaceons_html_aa6316b06d749f836540199855e0c2ee3"><div class="ttname"><a href="namespaceons.html#aa6316b06d749f836540199855e0c2ee3">ons::name_hash_input_to_base64</a></div><div class="ttdeci">std::optional&lt; std::string &gt; name_hash_input_to_base64(std::string_view input)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1048</div></div>
<div class="ttc" id="astructons_1_1settings__record_html_aaada0e961b1a92f0cda777a9501f94f7"><div class="ttname"><a href="structons_1_1settings__record.html#aaada0e961b1a92f0cda777a9501f94f7">ons::settings_record::loaded</a></div><div class="ttdeci">bool loaded</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:206</div></div>
<div class="ttc" id="anamespaceons_html_ad8fc8eb3b31df5126f1e7dfa37ff16dba3ac340832f29c11538fbe2d6f75e8bcc"><div class="ttname"><a href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16dba3ac340832f29c11538fbe2d6f75e8bcc">ons::ons_tx_type::update</a></div><div class="ttdeci">@ update</div></div>
<div class="ttc" id="astructons_1_1owner__record_html"><div class="ttname"><a href="structons_1_1owner__record.html">ons::owner_record</a></div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:194</div></div>
<div class="ttc" id="anamespaceons_html_a86725b235150e0f6d85b8c93a115bf03"><div class="ttname"><a href="namespaceons.html#a86725b235150e0f6d85b8c93a115bf03">ons::make_ed25519_signature</a></div><div class="ttdeci">ons::generic_signature make_ed25519_signature(crypto::hash const &amp;hash, crypto::ed25519_secret_key const &amp;skey)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:681</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a3521e851e3951b20fb2ca7e68ef3cb93"><div class="ttname"><a href="structons_1_1name__system__db.html#a3521e851e3951b20fb2ca7e68ef3cb93">ons::name_system_db::get_mappings</a></div><div class="ttdeci">std::vector&lt; mapping_record &gt; get_mappings(std::vector&lt; mapping_type &gt; const &amp;types, std::string_view name_base64_hash, std::optional&lt; uint64_t &gt; blockchain_height=std::nullopt)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2322</div></div>
<div class="ttc" id="anamespacecryptonote_html_a1823e8e194e85c09ac7231f927cca70a"><div class="ttname"><a href="namespacecryptonote.html#a1823e8e194e85c09ac7231f927cca70a">cryptonote::network_type</a></div><div class="ttdeci">network_type</div><div class="ttdef"><b>Definition:</b> cryptonote_config.h:241</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_ab1062e900ddf738d3f3d408a2a401820"><div class="ttname"><a href="structons_1_1name__system__db.html#ab1062e900ddf738d3f3d408a2a401820">ons::name_system_db::save_owner_sql</a></div><div class="ttdeci">sql_compiled_statement save_owner_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:326</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a94ac66f031e5bc2074caffc361b43f8a"><div class="ttname"><a href="structons_1_1name__system__db.html#a94ac66f031e5bc2074caffc361b43f8a">ons::name_system_db::save_owner</a></div><div class="ttdeci">bool save_owner(generic_owner const &amp;owner, int64_t *row_id)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2207</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_a6f01c720d5f2a55980a9b5e905305112"><div class="ttname"><a href="structons_1_1mapping__record.html#a6f01c720d5f2a55980a9b5e905305112">ons::mapping_record::owner</a></div><div class="ttdeci">generic_owner owner</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:235</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_ab3f4f43539e5f3c2cb1ac8d6957d0985"><div class="ttname"><a href="structons_1_1mapping__value.html#ab3f4f43539e5f3c2cb1ac8d6957d0985">ons::mapping_value::validate</a></div><div class="ttdeci">static bool validate(cryptonote::network_type nettype, mapping_type type, std::string_view value, mapping_value *blob=nullptr, std::string *reason=nullptr)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:899</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_af593a991a08b95f92854d952e1086902"><div class="ttname"><a href="structons_1_1name__system__db.html#af593a991a08b95f92854d952e1086902">ons::name_system_db::prune_mappings_sql</a></div><div class="ttdeci">sql_compiled_statement prune_mappings_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:334</div></div>
<div class="ttc" id="astructons_1_1owner__record_html_a397ce866761d6eab824323c094b4daf1"><div class="ttname"><a href="structons_1_1owner__record.html#a397ce866761d6eab824323c094b4daf1">ons::owner_record::address</a></div><div class="ttdeci">generic_owner address</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:200</div></div>
<div class="ttc" id="acryptonote__config_8h_html"><div class="ttname"><a href="cryptonote__config_8h.html">cryptonote_config.h</a></div></div>
<div class="ttc" id="anamespaceons_html_ad8fc8eb3b31df5126f1e7dfa37ff16dbaa546cabc633a9d02345954ffa2c98f44"><div class="ttname"><a href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16dbaa546cabc633a9d02345954ffa2c98f44">ons::ons_tx_type::renew</a></div><div class="ttdeci">@ renew</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_a4400cb23df2d0d7ba0afbe3f4c9c8b22"><div class="ttname"><a href="structons_1_1mapping__record.html#a4400cb23df2d0d7ba0afbe3f4c9c8b22">ons::mapping_record::register_height</a></div><div class="ttdeci">uint64_t register_height</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:228</div></div>
<div class="ttc" id="anamespaceons_html_a989f87ee353ac9602436d32d83698b93a99b47701c943ad79f5ee6c6e4c2e1d8f"><div class="ttname"><a href="namespaceons.html#a989f87ee353ac9602436d32d83698b93a99b47701c943ad79f5ee6c6e4c2e1d8f">ons::mapping_type::lokinet_5years</a></div><div class="ttdeci">@ lokinet_5years</div></div>
<div class="ttc" id="anamespaceons_html_a543ff4ead8ad012d6b6479575787c356"><div class="ttname"><a href="namespaceons.html#a543ff4ead8ad012d6b6479575787c356">ons::ONS_WALLET_TYPE_INTEGRATED</a></div><div class="ttdeci">constexpr char ONS_WALLET_TYPE_INTEGRATED</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:47</div></div>
<div class="ttc" id="anamespacecryptonote_html_a884c13f6c17c6ce8dd15f2e9bc4c75efa744198ad488063e0b9d1b6f59ce6fc84"><div class="ttname"><a href="namespacecryptonote.html#a884c13f6c17c6ce8dd15f2e9bc4c75efa744198ad488063e0b9d1b6f59ce6fc84">cryptonote::hf::hf16_pulse</a></div><div class="ttdeci">@ hf16_pulse</div></div>
<div class="ttc" id="anamespaceons_html_a8c0748b2d42604589c5f2c119b6c843b"><div class="ttname"><a href="namespaceons.html#a8c0748b2d42604589c5f2c119b6c843b">ons::LOKINET_DOMAIN_NAME_MAX_NOHYPHEN</a></div><div class="ttdeci">constexpr size_t LOKINET_DOMAIN_NAME_MAX_NOHYPHEN</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:34</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_a49a1460ab3f53523eee57e04791e000e"><div class="ttname"><a href="structons_1_1mapping__record.html#a49a1460ab3f53523eee57e04791e000e">ons::mapping_record::encrypted_value</a></div><div class="ttdeci">mapping_value encrypted_value</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:227</div></div>
<div class="ttc" id="aclassons_1_1sql__compiled__statement_html_a4a9d4149bacf71c5d17e6e9886c41451"><div class="ttname"><a href="classons_1_1sql__compiled__statement.html#a4a9d4149bacf71c5d17e6e9886c41451">ons::sql_compiled_statement::sql_compiled_statement</a></div><div class="ttdeci">sql_compiled_statement(sql_compiled_statement &amp;&amp;from)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:257</div></div>
<div class="ttc" id="astructons_1_1settings__record_html"><div class="ttname"><a href="structons_1_1settings__record.html">ons::settings_record</a></div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:203</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a83091775badafbcf0c259268b22e3782"><div class="ttname"><a href="structons_1_1name__system__db.html#a83091775badafbcf0c259268b22e3782">ons::name_system_db::prune_owners_sql</a></div><div class="ttdeci">sql_compiled_statement prune_owners_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:335</div></div>
<div class="ttc" id="anamespaceons_html_a989f87ee353ac9602436d32d83698b93a565a665b69ff84aa6dfc1bbeefa1aad1"><div class="ttname"><a href="namespaceons.html#a989f87ee353ac9602436d32d83698b93a565a665b69ff84aa6dfc1bbeefa1aad1">ons::mapping_type::lokinet</a></div><div class="ttdeci">@ lokinet</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_af618bda5376130be8a32fe04d34bb4b3"><div class="ttname"><a href="structons_1_1mapping__record.html#af618bda5376130be8a32fe04d34bb4b3">ons::mapping_record::id</a></div><div class="ttdeci">int64_t id</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:224</div></div>
<div class="ttc" id="anamespacecryptonote_html_ad85a93439d4fe0ec50cac84b46df913e"><div class="ttname"><a href="namespacecryptonote.html#ad85a93439d4fe0ec50cac84b46df913e">cryptonote::txtype</a></div><div class="ttdeci">txtype</div><div class="ttdef"><b>Definition:</b> txtypes.h:20</div></div>
<div class="ttc" id="anamespacecrypto_html_a075f95a5c71c1122b5f77074c4fc23b4"><div class="ttname"><a href="namespacecrypto.html#a075f95a5c71c1122b5f77074c4fc23b4">crypto::ed25519_secret_key</a></div><div class="ttdeci">epee::mlocked&lt; tools::scrubbed&lt; ed25519_secret_key_ &gt; &gt; ed25519_secret_key</div><div class="ttdef"><b>Definition:</b> crypto.h:94</div></div>
<div class="ttc" id="anamespacewallet25_html_a069a9cf6e98b6412419b457042c3ea4e"><div class="ttname"><a href="namespacewallet25.html#a069a9cf6e98b6412419b457042c3ea4e">wallet25::tx_hash</a></div><div class="ttdeci">crypto::hash tx_hash(const cryptonote::transaction &amp;tx)</div><div class="ttdef"><b>Definition:</b> wallet2.cpp:36</div></div>
<div class="ttc" id="aclassons_1_1sql__compiled__statement_html"><div class="ttname"><a href="classons_1_1sql__compiled__statement.html">ons::sql_compiled_statement</a></div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:240</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a2ab22c3960fcfcf709379382e9633e72"><div class="ttname"><a href="structons_1_1mapping__value.html#a2ab22c3960fcfcf709379382e9633e72">ons::mapping_value::operator==</a></div><div class="ttdeci">bool operator==(std::string_view other) const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:65</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_acef787907d3d09d1b9914fd01ca3a372"><div class="ttname"><a href="structons_1_1mapping__record.html#acef787907d3d09d1b9914fd01ca3a372">ons::mapping_record::txid</a></div><div class="ttdeci">crypto::hash txid</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:231</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html"><div class="ttname"><a href="structons_1_1mapping__record.html">ons::mapping_record</a></div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:213</div></div>
<div class="ttc" id="aclassons_1_1sql__compiled__statement_html_a5ef02222ce61bcbaf097835d27ef5da3"><div class="ttname"><a href="classons_1_1sql__compiled__statement.html#a5ef02222ce61bcbaf097835d27ef5da3">ons::sql_compiled_statement::operator=</a></div><div class="ttdeci">sql_compiled_statement &amp; operator=(const sql_compiled_statement &amp;)=delete</div></div>
<div class="ttc" id="anamespaceons_html_a34b1e532ce1722725f35204c52f56d63"><div class="ttname"><a href="namespaceons.html#a34b1e532ce1722725f35204c52f56d63">ons::mapping_type_allowed</a></div><div class="ttdeci">constexpr bool mapping_type_allowed(cryptonote::hf hf_version, mapping_type type)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:133</div></div>
<div class="ttc" id="aclassons_1_1sql__compiled__statement_html_a2613cabfac4f27b98a2ddf2c45fff916"><div class="ttname"><a href="classons_1_1sql__compiled__statement.html#a2613cabfac4f27b98a2ddf2c45fff916">ons::sql_compiled_statement::nsdb</a></div><div class="ttdeci">name_system_db &amp; nsdb</div><div class="ttdoc">The name_system_db upon which this object operates.</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:244</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a285acc850ebfb53e778a797dc6dc6973"><div class="ttname"><a href="structons_1_1mapping__value.html#a285acc850ebfb53e778a797dc6dc6973">ons::mapping_value::validate_encrypted</a></div><div class="ttdeci">static bool validate_encrypted(mapping_type type, std::string_view value, mapping_value *blob=nullptr, std::string *reason=nullptr)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:989</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_adde04534576a128b71ae2d1f25a5d1f5"><div class="ttname"><a href="structons_1_1mapping__record.html#adde04534576a128b71ae2d1f25a5d1f5">ons::mapping_record::prev_txid</a></div><div class="ttdeci">crypto::hash prev_txid</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:232</div></div>
<div class="ttc" id="anamespaceons_html_a3784a0f57a121b1d44f574b7a4733979"><div class="ttname"><a href="namespaceons.html#a3784a0f57a121b1d44f574b7a4733979">ons::WALLET_ACCOUNT_BINARY_LENGTH_NO_PAYMENT_ID</a></div><div class="ttdeci">constexpr size_t WALLET_ACCOUNT_BINARY_LENGTH_NO_PAYMENT_ID</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:32</div></div>
<div class="ttc" id="anamespaceons_html_a903aa760038f51803e659a296696a15d"><div class="ttname"><a href="namespaceons.html#a903aa760038f51803e659a296696a15d">ons::NAME_HASH_SIZE_B64_MAX</a></div><div class="ttdeci">constexpr size_t NAME_HASH_SIZE_B64_MAX</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:41</div></div>
<div class="ttc" id="astructons_1_1settings__record_html_ab5d14d75d0ca7e8b2aee0f700d607f35"><div class="ttname"><a href="structons_1_1settings__record.html#ab5d14d75d0ca7e8b2aee0f700d607f35">ons::settings_record::version</a></div><div class="ttdeci">int version</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:210</div></div>
<div class="ttc" id="astructcryptonote_1_1block_html"><div class="ttname"><a href="structcryptonote_1_1block.html">cryptonote::block</a></div><div class="ttdef"><b>Definition:</b> cryptonote_basic.h:405</div></div>
<div class="ttc" id="anamespacecryptonote_html_a884c13f6c17c6ce8dd15f2e9bc4c75efab25d5af1ff4fcfd3198edfba59d05886"><div class="ttname"><a href="namespacecryptonote.html#a884c13f6c17c6ce8dd15f2e9bc4c75efab25d5af1ff4fcfd3198edfba59d05886">cryptonote::hf::hf15_ons</a></div><div class="ttdeci">@ hf15_ons</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a88017dc77b2c2f42d3eb7dd422d7eb64"><div class="ttname"><a href="structons_1_1mapping__value.html#a88017dc77b2c2f42d3eb7dd422d7eb64">ons::mapping_value::decrypt</a></div><div class="ttdeci">bool decrypt(std::string_view name, mapping_type type, const crypto::hash *name_hash=nullptr)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1474</div></div>
<div class="ttc" id="anamespaceons_html_a56c20036c6a287db16692c92442ef47e"><div class="ttname"><a href="namespaceons.html#a56c20036c6a287db16692c92442ef47e">ons::ONS_WALLET_TYPE_SUBADDRESS</a></div><div class="ttdeci">constexpr char ONS_WALLET_TYPE_SUBADDRESS</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:46</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_ac6fc0893c52f5ce7d5871ef462686bd7"><div class="ttname"><a href="structons_1_1name__system__db.html#ac6fc0893c52f5ce7d5871ef462686bd7">ons::name_system_db::get_settings_sql</a></div><div class="ttdeci">sql_compiled_statement get_settings_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:333</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_afe1d03bac08709ca7a92b6866607aacd"><div class="ttname"><a href="structons_1_1name__system__db.html#afe1d03bac08709ca7a92b6866607aacd">ons::name_system_db::save_settings_sql</a></div><div class="ttdeci">sql_compiled_statement save_settings_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:328</div></div>
<div class="ttc" id="anamespaceons_html_a333a47bb814504a3fbe576e3e2254b9c"><div class="ttname"><a href="namespaceons.html#a333a47bb814504a3fbe576e3e2254b9c">ons::name_to_hash</a></div><div class="ttdeci">crypto::hash name_to_hash(std::string_view name, const std::optional&lt; crypto::hash &gt; &amp;key)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1348</div></div>
<div class="ttc" id="anamespaceons_html_aafd0012e57b4503dff6f816f178b7209"><div class="ttname"><a href="namespaceons.html#aafd0012e57b4503dff6f816f178b7209">ons::LOKINET_DOMAIN_NAME_MAX</a></div><div class="ttdeci">constexpr size_t LOKINET_DOMAIN_NAME_MAX</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:33</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a5eb0b79786b37e66be5e011aecd3f5ac"><div class="ttname"><a href="structons_1_1name__system__db.html#a5eb0b79786b37e66be5e011aecd3f5ac">ons::name_system_db::get_mapping_counts_sql</a></div><div class="ttdeci">sql_compiled_statement get_mapping_counts_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:337</div></div>
<div class="ttc" id="anamespaceons_html"><div class="ttname"><a href="namespaceons.html">ons</a></div><div class="ttdef"><b>Definition:</b> tx_extra.cpp:106</div></div>
<div class="ttc" id="anamespacecryptonote_html"><div class="ttname"><a href="namespacecryptonote.html">cryptonote</a></div><div class="ttdoc">Holds cryptonote related classes and helpers.</div><div class="ttdef"><b>Definition:</b> blockchain_db.cpp:43</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_aed17a6fa320a4f295287fe6a7ef06913"><div class="ttname"><a href="structons_1_1name__system__db.html#aed17a6fa320a4f295287fe6a7ef06913">ons::name_system_db::block_detach</a></div><div class="ttdeci">void block_detach(cryptonote::Blockchain const &amp;blockchain, uint64_t new_blockchain_height)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2202</div></div>
<div class="ttc" id="astructfmt_1_1formatter_3_01ons_1_1mapping__type_01_4_html_a4f17b418b334450cb5dbc34b804000ce"><div class="ttname"><a href="structfmt_1_1formatter_3_01ons_1_1mapping__type_01_4.html#a4f17b418b334450cb5dbc34b804000ce">fmt::formatter&lt; ons::mapping_type &gt;::format</a></div><div class="ttdeci">auto format(const ons::mapping_type &amp;t, format_context &amp;ctx)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:352</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a4075b56b4007466390d7174fd74e4690"><div class="ttname"><a href="structons_1_1mapping__value.html#a4075b56b4007466390d7174fd74e4690">ons::mapping_value::make_encrypted</a></div><div class="ttdeci">mapping_value make_encrypted(std::string_view name, const crypto::hash *name_hash=nullptr, bool deprecated_heavy=false) const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1540</div></div>
<div class="ttc" id="anamespaceons_html_ae5c07ec3fec3791890c5ad122df34f7a"><div class="ttname"><a href="namespaceons.html#ae5c07ec3fec3791890c5ad122df34f7a">ons::WALLET_ACCOUNT_BINARY_LENGTH_INC_PAYMENT_ID</a></div><div class="ttdeci">constexpr size_t WALLET_ACCOUNT_BINARY_LENGTH_INC_PAYMENT_ID</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:31</div></div>
<div class="ttc" id="aclassons_1_1sql__compiled__statement_html_a1f70eb3624bd5802ba53b472f9c27730"><div class="ttname"><a href="classons_1_1sql__compiled__statement.html#a1f70eb3624bd5802ba53b472f9c27730">ons::sql_compiled_statement::compile</a></div><div class="ttdeci">bool compile(std::string_view query, bool optimise_for_multiple_usage=true)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:534</div></div>
<div class="ttc" id="anamespaceons_html_ab9879b199f17237959f43d0b3c5433ec"><div class="ttname"><a href="namespaceons.html#ab9879b199f17237959f43d0b3c5433ec">ons::ONS_WALLET_TYPE_PRIMARY</a></div><div class="ttdeci">constexpr char ONS_WALLET_TYPE_PRIMARY</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:45</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_aabbbe005636dbcf2dcab08c7435bece4"><div class="ttname"><a href="structons_1_1mapping__value.html#aabbbe005636dbcf2dcab08c7435bece4">ons::mapping_value::len</a></div><div class="ttdeci">size_t len</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:54</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a6d3536643e4f6fc9ca68ef04b01b245f"><div class="ttname"><a href="structons_1_1name__system__db.html#a6d3536643e4f6fc9ca68ef04b01b245f">ons::name_system_db::get_mapping</a></div><div class="ttdeci">mapping_record get_mapping(mapping_type type, std::string_view name_base64_hash, std::optional&lt; uint64_t &gt; blockchain_height=std::nullopt)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2290</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_ab2e844d3d391578f831565e0e6ef0482"><div class="ttname"><a href="structons_1_1name__system__db.html#ab2e844d3d391578f831565e0e6ef0482">ons::name_system_db::get_mappings_by_owner_sql</a></div><div class="ttdeci">sql_compiled_statement get_mappings_by_owner_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:336</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_aad09a96deab9a372de8eb32d1d43218a"><div class="ttname"><a href="structons_1_1name__system__db.html#aad09a96deab9a372de8eb32d1d43218a">ons::name_system_db::save_mapping</a></div><div class="ttdeci">bool save_mapping(crypto::hash const &amp;tx_hash, cryptonote::tx_extra_oxen_name_system const &amp;src, uint64_t height, std::optional&lt; uint64_t &gt; expiration_height, int64_t owner_id, std::optional&lt; int64_t &gt; backup_owner_id)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2216</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a4bd4a24f8e7603ebd28b1b01630fdce3"><div class="ttname"><a href="structons_1_1name__system__db.html#a4bd4a24f8e7603ebd28b1b01630fdce3">ons::name_system_db::nettype</a></div><div class="ttdeci">cryptonote::network_type nettype</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:323</div></div>
<div class="ttc" id="anamespaceons_html_a989f87ee353ac9602436d32d83698b93a21d6f40cfb511982e4424e0e250a9557"><div class="ttname"><a href="namespaceons.html#a989f87ee353ac9602436d32d83698b93a21d6f40cfb511982e4424e0e250a9557">ons::mapping_type::session</a></div><div class="ttdeci">@ session</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a8e78c8b168ed06a26891b67eac90e247"><div class="ttname"><a href="structons_1_1name__system__db.html#a8e78c8b168ed06a26891b67eac90e247">ons::name_system_db::get_mapping_counts</a></div><div class="ttdeci">std::map&lt; mapping_type, int &gt; get_mapping_counts(uint64_t blockchain_height)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2437</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a66b380db0bc98d06a789c11c1a82ca6d"><div class="ttname"><a href="structons_1_1name__system__db.html#a66b380db0bc98d06a789c11c1a82ca6d">ons::name_system_db::get_wallet_mapping</a></div><div class="ttdeci">bool get_wallet_mapping(std::string str, uint64_t blockchain_height, cryptonote::address_parse_info &amp;addr_info)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2272</div></div>
<div class="ttc" id="atx__extra_8h_html"><div class="ttname"><a href="tx__extra_8h.html">tx_extra.h</a></div></div>
<div class="ttc" id="anamespacecryptonote_html_a7b6dd48b799974996fb5111859c34c55a14511f2f5564650d129ca7cabc333278"><div class="ttname"><a href="namespacecryptonote.html#a7b6dd48b799974996fb5111859c34c55a14511f2f5564650d129ca7cabc333278">cryptonote::blob_type::block</a></div><div class="ttdeci">@ block</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html"><div class="ttname"><a href="structons_1_1mapping__value.html">ons::mapping_value</a></div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:49</div></div>
<div class="ttc" id="anamespaceons_html_ae450f35e1f708d5b8f9f854776ac5345"><div class="ttname"><a href="namespaceons.html#ae450f35e1f708d5b8f9f854776ac5345">ons::init_oxen_name_system</a></div><div class="ttdeci">sqlite3 * init_oxen_name_system(const fs::path &amp;file_path, bool read_only)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:565</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a924e086e7051608bfb3e82a0a6a8729b"><div class="ttname"><a href="structons_1_1mapping__value.html#a924e086e7051608bfb3e82a0a6a8729b">ons::mapping_value::BUFFER_SIZE</a></div><div class="ttdeci">static constexpr size_t BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:51</div></div>
<div class="ttc" id="anamespaceons_html_a363f99466b65d166a904ddc05be8cb0c"><div class="ttname"><a href="namespaceons.html#a363f99466b65d166a904ddc05be8cb0c">ons::SESSION_PUBLIC_KEY_BINARY_LENGTH</a></div><div class="ttdeci">constexpr size_t SESSION_PUBLIC_KEY_BINARY_LENGTH</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:37</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a591bde775f6d8b04ed65c9b3d79c164e"><div class="ttname"><a href="structons_1_1mapping__value.html#a591bde775f6d8b04ed65c9b3d79c164e">ons::mapping_value::to_string</a></div><div class="ttdeci">std::string to_string() const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:56</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a496f0c1089fe0e52831c966291a95efa"><div class="ttname"><a href="structons_1_1name__system__db.html#a496f0c1089fe0e52831c966291a95efa">ons::name_system_db::network_type</a></div><div class="ttdeci">cryptonote::network_type network_type() const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:281</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a0fa44b6bb4dbcdf93dfd80c96bfb9c88"><div class="ttname"><a href="structons_1_1name__system__db.html#a0fa44b6bb4dbcdf93dfd80c96bfb9c88">ons::name_system_db::validate_ons_tx</a></div><div class="ttdeci">bool validate_ons_tx(cryptonote::hf hf_version, uint64_t blockchain_height, cryptonote::transaction const &amp;tx, cryptonote::tx_extra_oxen_name_system &amp;entry, std::string *reason)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1195</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_ad275d9b0123c1c01998283778bb35704"><div class="ttname"><a href="structons_1_1mapping__record.html#ad275d9b0123c1c01998283778bb35704">ons::mapping_record::backup_owner_id</a></div><div class="ttdeci">int64_t backup_owner_id</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:234</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a7ea6e6a8f7129c6ccc7606795db4f0d6"><div class="ttname"><a href="structons_1_1mapping__value.html#a7ea6e6a8f7129c6ccc7606795db4f0d6">ons::mapping_value::operator==</a></div><div class="ttdeci">bool operator==(mapping_value const &amp;other) const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:64</div></div>
<div class="ttc" id="astdbool_8h_html_a1062901a7428fdd9c7f180f5e01ea056"><div class="ttname"><a href="stdbool_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a></div><div class="ttdeci">int bool</div><div class="ttdef"><b>Definition:</b> stdbool.h:35</div></div>
<div class="ttc" id="anamespaceons_html_a89949edeb94e4417b1e3c010d3c747a0"><div class="ttname"><a href="namespaceons.html#a89949edeb94e4417b1e3c010d3c747a0">ons::LOKINET_ADDRESS_BINARY_LENGTH</a></div><div class="ttdeci">constexpr size_t LOKINET_ADDRESS_BINARY_LENGTH</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:35</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a940773df0e021c603e2b6720780ec581"><div class="ttname"><a href="structons_1_1mapping__value.html#a940773df0e021c603e2b6720780ec581">ons::mapping_value::make_decrypted</a></div><div class="ttdeci">mapping_value make_decrypted(std::string_view name, const crypto::hash *name_hash=nullptr) const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1548</div></div>
<div class="ttc" id="anamespaceons_html_a9530e6bb7b824044a03e87dde0bc99aa"><div class="ttname"><a href="namespaceons.html#a9530e6bb7b824044a03e87dde0bc99aa">ons::NAME_HASH_SIZE</a></div><div class="ttdeci">constexpr size_t NAME_HASH_SIZE</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:39</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_aac30024152f71c9a59d0af813ed83715"><div class="ttname"><a href="structons_1_1name__system__db.html#aac30024152f71c9a59d0af813ed83715">ons::name_system_db::get_owner_by_id</a></div><div class="ttdeci">owner_record get_owner_by_id(int64_t owner_id)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2264</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a49fb0336d981f4cb1ae2ee1c7db3262a"><div class="ttname"><a href="structons_1_1name__system__db.html#a49fb0336d981f4cb1ae2ee1c7db3262a">ons::name_system_db::last_processed_height</a></div><div class="ttdeci">uint64_t last_processed_height</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:324</div></div>
<div class="ttc" id="astructons_1_1owner__record_html_aab316bd022a381ef43ac3c931955b3c4"><div class="ttname"><a href="structons_1_1owner__record.html#aab316bd022a381ef43ac3c931955b3c4">ons::owner_record::loaded</a></div><div class="ttdeci">bool loaded</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:197</div></div>
<div class="ttc" id="astructcryptonote_1_1address__parse__info_html"><div class="ttname"><a href="structcryptonote_1_1address__parse__info.html">cryptonote::address_parse_info</a></div><div class="ttdef"><b>Definition:</b> cryptonote_basic_impl.h:67</div></div>
<div class="ttc" id="anamespaceons_html_afaf712021644e21862dc99657dfb727a"><div class="ttname"><a href="namespaceons.html#afaf712021644e21862dc99657dfb727a">ons::name_hash_bytes_to_base64</a></div><div class="ttdeci">std::string name_hash_bytes_to_base64(std::string_view bytes)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1041</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_a5d59743ab85715a043daa3b98edddeea"><div class="ttname"><a href="structons_1_1mapping__record.html#a5d59743ab85715a043daa3b98edddeea">ons::mapping_record::owner_id</a></div><div class="ttdeci">int64_t owner_id</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:233</div></div>
<div class="ttc" id="anamespaceons_html_a6f9b7728c33c526dd15abee49c621892"><div class="ttname"><a href="namespaceons.html#a6f9b7728c33c526dd15abee49c621892">ons::mapping_type_str</a></div><div class="ttdeci">constexpr std::string_view mapping_type_str(mapping_type type)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:119</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_a351a7f71c71f9f542cdfc5f3fcc76c23"><div class="ttname"><a href="structons_1_1mapping__record.html#a351a7f71c71f9f542cdfc5f3fcc76c23">ons::mapping_record::backup_owner</a></div><div class="ttdeci">generic_owner backup_owner</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:236</div></div>
<div class="ttc" id="aclassons_1_1sql__compiled__statement_html_a5fe15970411a12233db16b67d30afc29"><div class="ttname"><a href="classons_1_1sql__compiled__statement.html#a5fe15970411a12233db16b67d30afc29">ons::sql_compiled_statement::statement</a></div><div class="ttdeci">sqlite3_stmt * statement</div><div class="ttdoc">The stored, owned statement.</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:246</div></div>
<div class="ttc" id="astructcryptonote_1_1account__public__address_html"><div class="ttname"><a href="structcryptonote_1_1account__public__address.html">cryptonote::account_public_address</a></div><div class="ttdef"><b>Definition:</b> cryptonote_basic.h:470</div></div>
<div class="ttc" id="anamespacecryptonote_1_1anonymous__namespace_02simplewallet_8cpp_03_html_ab84787baef2d08dab790bcf6b8aa4fb2"><div class="ttname"><a href="namespacecryptonote_1_1anonymous__namespace_02simplewallet_8cpp_03.html#ab84787baef2d08dab790bcf6b8aa4fb2">cryptonote::anonymous_namespace{simplewallet.cpp}::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> simplewallet.cpp:426</div></div>
<div class="ttc" id="anamespaceons_html_ac75415847a1185189cbafb64b29fff41"><div class="ttname"><a href="namespaceons.html#ac75415847a1185189cbafb64b29fff41">ons::expiry_blocks</a></div><div class="ttdeci">std::optional&lt; uint64_t &gt; expiry_blocks(cryptonote::network_type nettype, mapping_type type)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:627</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html"><div class="ttname"><a href="structons_1_1name__system__db.html">ons::name_system_db</a></div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:276</div></div>
<div class="ttc" id="anamespaceserialization_html_a2c903a13fe2f03de6d83908a3be64bcf"><div class="ttname"><a href="namespaceserialization.html#a2c903a13fe2f03de6d83908a3be64bcf">serialization::value</a></div><div class="ttdeci">void value(Archive &amp;ar, T &amp;v)</div><div class="ttdoc">Serialization functions. These are used to add/read a value to/from an ongoing serialization.</div><div class="ttdef"><b>Definition:</b> serialization.h:205</div></div>
<div class="ttc" id="astructons_1_1generic__owner_html"><div class="ttname"><a href="structons_1_1generic__owner.html">ons::generic_owner</a></div><div class="ttdef"><b>Definition:</b> tx_extra.h:98</div></div>
<div class="ttc" id="anamespaceons_html_a67d0014e0fe6296f8ff6d755925009c2"><div class="ttname"><a href="namespaceons.html#a67d0014e0fe6296f8ff6d755925009c2">ons::name_to_base64_hash</a></div><div class="ttdeci">std::string name_to_base64_hash(std::string_view name)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1362</div></div>
<div class="ttc" id="anamespaceons_html_aed4be8981d98b0577eca75418fb41eed"><div class="ttname"><a href="namespaceons.html#aed4be8981d98b0577eca75418fb41eed">ons::validate_ons_name</a></div><div class="ttdeci">bool validate_ons_name(mapping_type type, std::string name, std::string *reason)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:751</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a64bf7a2e6fe254e473f1efffff480d22"><div class="ttname"><a href="structons_1_1name__system__db.html#a64bf7a2e6fe254e473f1efffff480d22">ons::name_system_db::height</a></div><div class="ttdeci">uint64_t height() const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:282</div></div>
<div class="ttc" id="anamespaceons_html_ad8fc8eb3b31df5126f1e7dfa37ff16db"><div class="ttname"><a href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16db">ons::ons_tx_type</a></div><div class="ttdeci">ons_tx_type</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:183</div></div>
<div class="ttc" id="astructcryptonote_1_1tx__extra__oxen__name__system_html"><div class="ttname"><a href="structcryptonote_1_1tx__extra__oxen__name__system.html">cryptonote::tx_extra_oxen_name_system</a></div><div class="ttdef"><b>Definition:</b> tx_extra.h:554</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a380f655a4e5b686fbe68a1468f205dd0"><div class="ttname"><a href="structons_1_1name__system__db.html#a380f655a4e5b686fbe68a1468f205dd0">ons::name_system_db::last_processed_hash</a></div><div class="ttdeci">crypto::hash last_processed_hash</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:325</div></div>
<div class="ttc" id="anamespaceons_html_a989f87ee353ac9602436d32d83698b93"><div class="ttname"><a href="namespaceons.html#a989f87ee353ac9602436d32d83698b93">ons::mapping_type</a></div><div class="ttdeci">mapping_type</div><div class="ttdef"><b>Definition:</b> oxen_economy.h:87</div></div>
<div class="ttc" id="aclasscryptonote_1_1transaction_html"><div class="ttname"><a href="classcryptonote_1_1transaction.html">cryptonote::transaction</a></div><div class="ttdef"><b>Definition:</b> cryptonote_basic.h:239</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a539bb55985ade25f049c6e0bc26606a9"><div class="ttname"><a href="structons_1_1name__system__db.html#a539bb55985ade25f049c6e0bc26606a9">ons::name_system_db::resolve_sql</a></div><div class="ttdeci">sql_compiled_statement resolve_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:332</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_a90d362f9da5322e97d481d57d7fcd386"><div class="ttname"><a href="structons_1_1mapping__record.html#a90d362f9da5322e97d481d57d7fcd386">ons::mapping_record::type</a></div><div class="ttdeci">mapping_type type</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:225</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_a200c8985afa606db2cd77a1d33a20cd4"><div class="ttname"><a href="structons_1_1mapping__record.html#a200c8985afa606db2cd77a1d33a20cd4">ons::mapping_record::active</a></div><div class="ttdeci">bool active(uint64_t blockchain_height) const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:528</div></div>
<div class="ttc" id="astructcrypto_1_1ed25519__public__key_html"><div class="ttname"><a href="structcrypto_1_1ed25519__public__key.html">crypto::ed25519_public_key</a></div><div class="ttdef"><b>Definition:</b> crypto.h:90</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_aa1e6f12009708e4b34da2323f475ecc1"><div class="ttname"><a href="structons_1_1mapping__value.html#aa1e6f12009708e4b34da2323f475ecc1">ons::mapping_value::encrypted</a></div><div class="ttdeci">bool encrypted</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:53</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a2d19872322a23467c3186637dde8d1fc"><div class="ttname"><a href="structons_1_1mapping__value.html#a2d19872322a23467c3186637dde8d1fc">ons::mapping_value::mapping_value</a></div><div class="ttdeci">mapping_value()</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1039</div></div>
<div class="ttc" id="anamespaceons_html_a989f87ee353ac9602436d32d83698b93a402c5a6fe4c04c7d269c4532baecc8ee"><div class="ttname"><a href="namespaceons.html#a989f87ee353ac9602436d32d83698b93a402c5a6fe4c04c7d269c4532baecc8ee">ons::mapping_type::wallet</a></div><div class="ttdeci">@ wallet</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a0b8c992dcb27c34aba11a63b1a23db45"><div class="ttname"><a href="structons_1_1mapping__value.html#a0b8c992dcb27c34aba11a63b1a23db45">ons::mapping_value::buffer</a></div><div class="ttdeci">std::array&lt; uint8_t, BUFFER_SIZE &gt; buffer</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:52</div></div>
<div class="ttc" id="anamespaceons_html_a454f3595df7c0a1a14f37b939329cd39"><div class="ttname"><a href="namespaceons.html#a454f3595df7c0a1a14f37b939329cd39">ons::encrypted_wallet_value_to_info</a></div><div class="ttdeci">std::optional&lt; cryptonote::address_parse_info &gt; encrypted_wallet_value_to_info(std::string name, std::string encrypted_value, std::string nonce)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:869</div></div>
<div class="ttc" id="aclassons_1_1sql__compiled__statement_html_a638b34d6476a2f52169ba58cadea9a95"><div class="ttname"><a href="classons_1_1sql__compiled__statement.html#a638b34d6476a2f52169ba58cadea9a95">ons::sql_compiled_statement::sql_compiled_statement</a></div><div class="ttdeci">sql_compiled_statement(name_system_db &amp;nsdb)</div><div class="ttdoc">Constructor; takes a reference to the name_system_db.</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:249</div></div>
<div class="ttc" id="anamespaceons_html_a728fd67fbf1fef8f0c4b0774ffbb60d0"><div class="ttname"><a href="namespaceons.html#a728fd67fbf1fef8f0c4b0774ffbb60d0">ons::all_mapping_types</a></div><div class="ttdeci">std::vector&lt; mapping_type &gt; all_mapping_types(hf hf_version)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:615</div></div>
<div class="ttc" id="astructcrypto_1_1hash_html"><div class="ttname"><a href="structcrypto_1_1hash.html">crypto::hash</a></div><div class="ttdef"><b>Definition:</b> hash.h:48</div></div>
<div class="ttc" id="astructons_1_1settings__record_html_acff9cf7c4ef13dd01e3071ffd75780b9"><div class="ttname"><a href="structons_1_1settings__record.html#acff9cf7c4ef13dd01e3071ffd75780b9">ons::settings_record::top_height</a></div><div class="ttdeci">uint64_t top_height</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:208</div></div>
<div class="ttc" id="anamespaceons_html_ac1dae0c40155aad214bf551ab1078abd"><div class="ttname"><a href="namespaceons.html#ac1dae0c40155aad214bf551ab1078abd">ons::is_lokinet_type</a></div><div class="ttdeci">constexpr bool is_lokinet_type(mapping_type t)</div><div class="ttdef"><b>Definition:</b> oxen_economy.h:99</div></div>
<div class="ttc" id="anamespaceons_html_a88020d7d89529e10e19b84f3770a0a0f"><div class="ttname"><a href="namespaceons.html#a88020d7d89529e10e19b84f3770a0a0f">ons::validate_mapping_type</a></div><div class="ttdeci">bool validate_mapping_type(std::string_view mapping_type_str, hf hf_version, ons_tx_type txtype, ons::mapping_type *mapping_type, std::string *reason)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1306</div></div>
<div class="ttc" id="anamespaceons_html_a17121c7c0d89c4d39dc5dd72c4d19aa2"><div class="ttname"><a href="namespaceons.html#a17121c7c0d89c4d39dc5dd72c4d19aa2">ons::db_mapping_type</a></div><div class="ttdeci">constexpr uint16_t db_mapping_type(ons::mapping_type type)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:149</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_ac3c73914961ece3927be29a9ca421369"><div class="ttname"><a href="structons_1_1name__system__db.html#ac3c73914961ece3927be29a9ca421369">ons::name_system_db::transaction_begun</a></div><div class="ttdeci">bool transaction_begun</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:321</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_aeb4ece2927321ff93ce6cf921ab95abb"><div class="ttname"><a href="structons_1_1name__system__db.html#aeb4ece2927321ff93ce6cf921ab95abb">ons::name_system_db::init</a></div><div class="ttdeci">bool init(cryptonote::Blockchain const *blockchain, cryptonote::network_type nettype, sqlite3 *db)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1752</div></div>
<div class="ttc" id="acrypto_2crypto_8h_html"><div class="ttname"><a href="crypto_2crypto_8h.html">crypto.h</a></div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_add436127b1520dc3cbf56916ca006286"><div class="ttname"><a href="structons_1_1mapping__record.html#add436127b1520dc3cbf56916ca006286">ons::mapping_record::loaded</a></div><div class="ttdeci">bool loaded</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:223</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_aaba76d0d7d3bba59f55af1a994eb445d"><div class="ttname"><a href="structons_1_1name__system__db.html#aaba76d0d7d3bba59f55af1a994eb445d">ons::name_system_db::save_mapping_sql</a></div><div class="ttdeci">sql_compiled_statement save_mapping_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:327</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a07fd6960fd4a9e429a1df0765e54a85c"><div class="ttname"><a href="structons_1_1name__system__db.html#a07fd6960fd4a9e429a1df0765e54a85c">ons::name_system_db::save_settings</a></div><div class="ttdeci">bool save_settings(uint64_t top_height, crypto::hash const &amp;top_hash, int version)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:2237</div></div>
<div class="ttc" id="anamespaceons_html_a989f87ee353ac9602436d32d83698b93acf559d3b337d32a0fdb144648e8feeaf"><div class="ttname"><a href="namespaceons.html#a989f87ee353ac9602436d32d83698b93acf559d3b337d32a0fdb144648e8feeaf">ons::mapping_type::lokinet_2years</a></div><div class="ttdeci">@ lokinet_2years</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a217924d35d69188b6782def9a21dae34"><div class="ttname"><a href="structons_1_1mapping__value.html#a217924d35d69188b6782def9a21dae34">ons::mapping_value::get_wallet_address_info</a></div><div class="ttdeci">std::optional&lt; cryptonote::address_parse_info &gt; get_wallet_address_info() const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:1556</div></div>
<div class="ttc" id="astructons_1_1name__system__db_html_a6589d342f5c36a00e3b09cc3ddba0b99"><div class="ttname"><a href="structons_1_1name__system__db.html#a6589d342f5c36a00e3b09cc3ddba0b99">ons::name_system_db::get_owner_by_key_sql</a></div><div class="ttdeci">sql_compiled_statement get_owner_by_key_sql</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:329</div></div>
<div class="ttc" id="anamespaceons_html_ad8fc8eb3b31df5126f1e7dfa37ff16dba0461ebd2b773878eac9f78a891912d65"><div class="ttname"><a href="namespaceons.html#ad8fc8eb3b31df5126f1e7dfa37ff16dba0461ebd2b773878eac9f78a891912d65">ons::ons_tx_type::buy</a></div><div class="ttdeci">@ buy</div></div>
<div class="ttc" id="anamespaceons_html_ad608997cae6fc1e3786ecb64189f1148"><div class="ttname"><a href="namespaceons.html#ad608997cae6fc1e3786ecb64189f1148">ons::parse_owner_to_generic_owner</a></div><div class="ttdeci">bool parse_owner_to_generic_owner(cryptonote::network_type nettype, std::string_view owner, generic_owner &amp;result, std::string *reason)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:706</div></div>
<div class="ttc" id="anamespaceons_html_ae0d5f6f4add6d7d3f12c43911a2a4481"><div class="ttname"><a href="namespaceons.html#ae0d5f6f4add6d7d3f12c43911a2a4481">ons::SODIUM_ENCRYPTION_EXTRA_BYTES</a></div><div class="ttdeci">constexpr size_t SODIUM_ENCRYPTION_EXTRA_BYTES</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:43</div></div>
<div class="ttc" id="anamespaceons_html_aebf8e36fd26113b0ba62494590b75f98"><div class="ttname"><a href="namespaceons.html#aebf8e36fd26113b0ba62494590b75f98">ons::NAME_HASH_SIZE_B64_MIN</a></div><div class="ttdeci">constexpr size_t NAME_HASH_SIZE_B64_MIN</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:40</div></div>
<div class="ttc" id="anamespaceons_html_adc387613904f0957d2b7cff8e7dce630"><div class="ttname"><a href="namespaceons.html#adc387613904f0957d2b7cff8e7dce630">ons::SESSION_DISPLAY_NAME_MAX</a></div><div class="ttdeci">constexpr size_t SESSION_DISPLAY_NAME_MAX</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:36</div></div>
<div class="ttc" id="anamespaceons_html_a989f87ee353ac9602436d32d83698b93aa6534e289f586e369be7cc65a6dc9a58"><div class="ttname"><a href="namespaceons.html#a989f87ee353ac9602436d32d83698b93aa6534e289f586e369be7cc65a6dc9a58">ons::mapping_type::lokinet_10years</a></div><div class="ttdeci">@ lokinet_10years</div></div>
<div class="ttc" id="astructons_1_1mapping__record_html_ae1d41c9b3e411c936786352341b197d9"><div class="ttname"><a href="structons_1_1mapping__record.html#ae1d41c9b3e411c936786352341b197d9">ons::mapping_record::expiration_height</a></div><div class="ttdeci">std::optional&lt; uint64_t &gt; expiration_height</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:229</div></div>
<div class="ttc" id="astructfmt_1_1formatter_3_01ons_1_1mapping__value_01_4_html_aa37de2115d356b66056e241ec27ca7e3"><div class="ttname"><a href="structfmt_1_1formatter_3_01ons_1_1mapping__value_01_4.html#aa37de2115d356b66056e241ec27ca7e3">fmt::formatter&lt; ons::mapping_value &gt;::format</a></div><div class="ttdeci">auto format(const ons::mapping_value &amp;v, format_context &amp;ctx)</div><div class="ttdef"><b>Definition:</b> oxen_name_system.h:345</div></div>
<div class="ttc" id="astructons_1_1mapping__value_html_a0f9148c6d4f167f9d18917796853b633"><div class="ttname"><a href="structons_1_1mapping__value.html#a0f9148c6d4f167f9d18917796853b633">ons::mapping_value::value_nonce</a></div><div class="ttdeci">std::pair&lt; std::basic_string_view&lt; unsigned char &gt;, std::basic_string_view&lt; unsigned char &gt; &gt; value_nonce(mapping_type type) const</div><div class="ttdef"><b>Definition:</b> oxen_name_system.cpp:95</div></div>
<div class="ttc" id="anamespacedb_html"><div class="ttname"><a href="namespacedb.html">db</a></div><div class="ttdef"><b>Definition:</b> database.cpp:6</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 21 2022 01:11:50 for Monero by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
